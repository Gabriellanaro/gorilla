<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Function Calling Leaderboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
  <style>
    :root {
      --bg: #f3f6ff;
      --panel: #ffffff;
      --border: #d7e3ff;
      --text: #1d2b4f;
      --muted: #5b6b8a;
      --cell: #c8d7ff;
      --best: #7ef07b;
      --baseline: #bcd0ff;
    }
    body {
      margin: 0;
      background: linear-gradient(135deg, #f0f5ff, #e5efff);
      color: var(--text);
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }
    .wrap {
      padding: 24px;
      max-width: 1200px;
      margin: 0 auto;
    }
    h1 {
      margin: 0 0 12px;
      font-size: 24px;
      font-weight: 700;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      background: var(--panel);
      padding: 12px 16px;
      border: 1px solid var(--border);
      border-radius: 10px;
      box-shadow: 0 6px 16px rgba(23, 51, 94, 0.08);
      margin-bottom: 16px;
    }
    .tabs {
      display: inline-flex;
      gap: 8px;
      margin: 4px 0 16px;
    }
    .tab-button {
      border: 1px solid var(--border);
      background: #f8fbff;
      border-radius: 999px;
      padding: 6px 14px;
      font-size: 13px;
      color: var(--text);
      cursor: pointer;
    }
    .tab-button.active {
      background: #2b5cff;
      border-color: #2b5cff;
      color: #ffffff;
    }
    .tab-panel {
      display: none;
    }
    .tab-panel.active {
      display: block;
    }
    .plot-panel {
      background: var(--panel);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 16px;
      box-shadow: 0 6px 16px rgba(23, 51, 94, 0.08);
    }
    .plot-subtabs {
      display: inline-flex;
      gap: 8px;
      margin-bottom: 12px;
    }
    .plot-subtabs.secondary {
      margin-top: 6px;
    }
    .plot-view {
      display: none;
    }
    .plot-view.active {
      display: block;
    }
    .plot-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 12px;
    }
    .plot-warning {
      padding: 12px;
      border: 1px dashed var(--border);
      border-radius: 10px;
      background: #f6f8ff;
      color: var(--muted);
      font-size: 13px;
      text-align: center;
      margin-bottom: 12px;
    }
    .plot-warning + .plot-warning {
      margin-top: 8px;
    }
    .plot-info {
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
    }
    #heatmap_stack .section {
      margin: 24px 0;
    }
    #plot_scatter .section {
      margin: 20px 0;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border);
    }
    #plot_contrib .section {
      margin: 20px 0;
      padding-bottom: 8px;
      border-bottom: 1px solid var(--border);
    }
    .controls label {
      font-size: 13px;
      color: var(--muted);
    }
    select, button {
      margin-left: 6px;
      padding: 6px 10px;
      border: 1px solid var(--border);
      border-radius: 6px;
      background: #f8fbff;
      color: var(--text);
      font-size: 13px;
    }
    button {
      cursor: pointer;
    }
    .filter {
      min-width: 200px;
    }
    .model-filter {
      width: 220px;
      min-height: 120px;
    }
    .sortable {
      cursor: pointer;
      user-select: none;
    }
    .sortable:hover {
      text-decoration: underline;
      background: #eef3ff;
    }
    .overall-header {
      background: #e2e6ef;
      font-weight: 700;
    }
    .sort-indicator {
      margin-left: 6px;
      font-size: 11px;
      color: var(--muted);
    }
    .note {
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 10px;
    }
    .section {
      margin-top: 24px;
    }
    .section h2 {
      margin: 16px 0 8px;
      font-size: 18px;
    }
    .section .note {
      margin-top: 0;
    }
    .chart-card {
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 12px;
      background: var(--panel);
    }
    .chart-title {
      font-size: 14px;
      font-weight: 700;
      margin: 0 0 8px;
    }
    .chart-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      margin-bottom: 10px;
      font-size: 12px;
      color: var(--muted);
    }
    .chart-controls select {
      margin-left: 6px;
    }
    .chart-svg {
      width: 100%;
      height: auto;
      overflow: visible;
    }
    .table-wrap {
      overflow: auto;
      border: 1px solid var(--border);
      border-radius: 12px;
      background: var(--panel);
    }
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      min-width: 760px;
    }
    thead th {
      position: sticky;
      top: 0;
      background: #f9fbff;
      border-bottom: 1px solid var(--border);
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: var(--muted);
      padding: 10px;
      text-align: center;
    }
    tbody td {
      padding: 12px 10px;
      text-align: center;
      background: var(--cell);
      border-bottom: 1px solid #e6ecff;
      border-right: 1px solid #e6ecff;
      font-size: 14px;
    }
    tbody td:first-child {
      text-align: left;
      background: #f2f6ff;
      font-weight: 600;
      color: #15307a;
    }
    tbody td.baseline {
      background: var(--baseline);
      font-weight: 600;
    }
    tbody td.best {
      background: var(--best);
      font-weight: 700;
      color: #0c3a0c;
    }
    tbody tr:last-child td {
      border-bottom: none;
    }
    tbody td:last-child, thead th:last-child {
      border-right: none;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>OpenFunctions Leaderboard</h1>
    <div class="controls">
      <label>Delta format
        <select id="deltaMode">
          <option value="pp">pp</option>
          <option value="rel">relative%</option>
        </select>
      </label>
      <label>Detail mode
        <select id="detailMode">
          <option value="full">Full</option>
          <option value="summary">Summary</option>
        </select>
      </label>
      <label>Table
        <select id="tableSelect"></select>
      </label>
      <label class="filter">Models
        <select id="modelFilter" class="model-filter" multiple></select>
      </label>
      <button id="selectAllModels">All</button>
      <button id="clearModels">None</button>
      <label>
        <input type="checkbox" id="excludeWebSearch" checked>
        Exclude web_search from overall
      </label>
    </div>
    <div class="note" id="note"></div>
    <div class="note" id="overallLabel"></div>
    <div class="tabs">
      <button class="tab-button active" id="tabResults" type="button">Results</button>
      <button class="tab-button" id="tabPlots" type="button">Plots</button>
    </div>
    <div class="tab-panel active" id="resultsTab">
      <div class="table-wrap">
        <table data-table-key="main">
          <thead>
            <tr>
              <th>Model</th>
              <th>OO</th>
              <th>OA</th>
              <th>AO</th>
              <th>AA</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
      <div id="detailSections"></div>
    </div>
    <div class="tab-panel" id="plotsTab">
      <div class="plot-panel">
        <div class="plot-subtabs">
          <button class="tab-button active" id="plotTabScatter" type="button">Scatter</button>
          <button class="tab-button" id="plotTabHeatmap" type="button">Heatmap</button>
          <button class="tab-button" id="plotTabContribution" type="button">Contribution</button>
          <button class="tab-button" id="plotTabErrors" type="button">Errors</button>
        </div>
        <div class="plot-view active" id="plots_scatter_view">
          <div class="plot-controls">
            <label>Metric mode
              <select id="plotMetricMode">
                <option value="accuracy">Accuracy</option>
                <option value="delta">Delta</option>
              </select>
            </label>
          <label>Slice
            <select id="plotCategoryFilter"></select>
          </label>
            <label>
              <input type="checkbox" class="plot-combo" value="OA" checked>
              OA
            </label>
            <label>
              <input type="checkbox" class="plot-combo" value="AO" checked>
              AO
            </label>
            <label>
              <input type="checkbox" class="plot-combo" value="AA" checked>
              AA
            </label>
          </div>
          <div class="plot-warning" id="plotWarning"></div>
          <div id="plot_scatter"></div>
          <div class="plot-info">Points show OO vs OA/AO/AA for the current table slice and detail mode.</div>
        </div>
        <div class="plot-view" id="plots_heatmap_view">
          <div class="plot-controls">
            <label>Combo
              <select id="heatmapCombo">
                <option value="OA">OA</option>
                <option value="AO">AO</option>
                <option value="AA">AA</option>
              </select>
            </label>
          </div>
          <div class="plot-info">Cells show Δ accuracy = combo − OO, per model and subcategory.</div>
          <div class="plot-warning" id="heatmapWarning"></div>
          <div id="heatmap_stack"></div>
        </div>
        <div class="plot-view" id="plots_contrib_view">
          <div class="plot-info">
            Stacked bars show how each top-level component contributes to the overall delta vs OO.
          </div>
          <div class="plot-warning" id="contribWarning"></div>
          <div id="plot_contrib"></div>
        </div>
        <div class="plot-view" id="plots_errors_view">
          <div class="plot-subtabs secondary">
            <button class="tab-button active" id="errorTabMix" type="button">Error mix</button>
            <button class="tab-button" id="errorTabHeatmap" type="button">Delta heatmap</button>
            <button class="tab-button" id="errorTabBuckets" type="button">BFCL buckets</button>
          </div>
          <div class="plot-view active" id="error_mix_view">
            <div class="plot-controls">
              <label>Display
                <select id="errorMixMode">
                  <option value="share">Share</option>
                  <option value="count">Counts</option>
                </select>
              </label>
            </div>
            <div class="plot-warning" id="errorMixWarning"></div>
            <div id="error_mix_plot"></div>
            <div class="plot-info">Stacked bars show composition of incorrect examples by error type.</div>
          </div>
          <div class="plot-view" id="error_heatmap_view">
            <div class="plot-controls">
              <label>Condition
                <select id="errorHeatmapCombo">
                  <option value="OA">OA</option>
                  <option value="AO">AO</option>
                  <option value="AA">AA</option>
                </select>
              </label>
            </div>
            <div class="plot-warning" id="errorHeatmapWarning"></div>
            <div id="error_heatmap_plot"></div>
            <div class="plot-info">
              Cells show Δ error rate (condition − OO), over total examples in each slice.
            </div>
          </div>
          <div class="plot-view" id="error_bucket_view">
            <div class="plot-controls">
              <label>Display
                <select id="errorBucketMode">
                  <option value="share">Share of errors</option>
                  <option value="rate">Error rate</option>
                </select>
              </label>
            </div>
            <div class="plot-warning" id="errorBucketWarning"></div>
            <div id="error_bucket_plot"></div>
            <div class="plot-info">
              Buckets follow BFCL-style root causes; error rate is per total examples.
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    const MISSING = "--";
    const mainRows = [{"model": "Azure gpt-4o (FC)", "OO": 48.47, "OA": 47.56, "AO": 50.38, "AA": 51.39, "OO_excl_web": 44.928000000000004, "OA_excl_web": 47.907, "AO_excl_web": 47.611000000000004, "AA_excl_web": 48.57899999999999, "bestAcc": 51.39}, {"model": "Azure gpt-5-mini (FC)", "OO": 51.56, "OA": null, "AO": null, "AA": null, "OO_excl_web": 46.507999999999996, "OA_excl_web": null, "AO_excl_web": null, "AA_excl_web": null, "bestAcc": 51.56}, {"model": "Azure gpt-5.1-responses (FC)", "OO": 43.55, "OA": 49.14, "AO": 49.11, "AA": 45.44, "OO_excl_web": 43.203, "OA_excl_web": 44.787, "AO_excl_web": 45.961999999999996, "AA_excl_web": 45.29, "bestAcc": 49.14}];
    const categoryTablesFull = [{"key": "data_agentic", "title": "Agentic", "metrics": ["Agentic Overall Acc", "Web Search Summary", "Web Search Base", "Web Search No Snippet", "Memory Summary", "Memory KV", "Memory Vector", "Memory Recursive Summarization"], "rows": [{"model": "Azure gpt-4o (FC)", "metrics": {"Agentic Overall Acc": {"OO": 30.15, "OA": 28.37, "AO": 35.09, "AA": 36.48}, "Web Search Summary": {"OO": 39.0, "OA": 27.5, "AO": 42.0, "AA": 43.5}, "Web Search Base": {"OO": 39.0, "OA": 31.0, "AO": 43.0, "AA": 45.0}, "Web Search No Snippet": {"OO": 39.0, "OA": 24.0, "AO": 41.0, "AA": 42.0}, "Memory Summary": {"OO": 21.29, "OA": 29.25, "AO": 28.17, "AA": 29.46}, "Memory KV": {"OO": 14.19, "OA": 15.48, "AO": 17.42, "AA": 19.35}, "Memory Vector": {"OO": 16.77, "OA": 22.58, "AO": 23.87, "AA": 19.35}, "Memory Recursive Summarization": {"OO": 32.9, "OA": 49.68, "AO": 43.23, "AA": 49.68}}}, {"model": "Azure gpt-5-mini (FC)", "metrics": {"Agentic Overall Acc": {"OO": 55.86, "OA": null, "AO": null, "AA": null}, "Web Search Summary": {"OO": 68.5, "OA": null, "AO": null, "AA": null}, "Web Search Base": {"OO": 67.0, "OA": null, "AO": null, "AA": null}, "Web Search No Snippet": {"OO": 70.0, "OA": null, "AO": null, "AA": null}, "Memory Summary": {"OO": 43.23, "OA": null, "AO": null, "AA": null}, "Memory KV": {"OO": 31.61, "OA": null, "AO": null, "AA": null}, "Memory Vector": {"OO": 44.52, "OA": null, "AO": null, "AA": null}, "Memory Recursive Summarization": {"OO": 53.55, "OA": null, "AO": null, "AA": null}}}, {"model": "Azure gpt-5.1-responses (FC)", "metrics": {"Agentic Overall Acc": {"OO": 27.12, "OA": 41.63, "AO": 43.13, "AA": 35.63}, "Web Search Summary": {"OO": 28.0, "OA": 52.5, "AO": 51.0, "AA": 36.0}, "Web Search Base": {"OO": 26.0, "OA": 56.0, "AO": 55.0, "AA": 36.0}, "Web Search No Snippet": {"OO": 30.0, "OA": 49.0, "AO": 47.0, "AA": 36.0}, "Memory Summary": {"OO": 26.24, "OA": 30.75, "AO": 35.27, "AA": 35.27}, "Memory KV": {"OO": 16.13, "OA": 21.94, "AO": 25.16, "AA": 21.29}, "Memory Vector": {"OO": 16.77, "OA": 13.55, "AO": 19.35, "AA": 18.71}, "Memory Recursive Summarization": {"OO": 45.81, "OA": 56.77, "AO": 61.29, "AA": 65.81}}}], "missing": []}, {"key": "data_live", "title": "Live", "metrics": ["Live Overall Acc", "AST Summary", "Python Simple AST", "Python Multiple AST", "Python Parallel AST", "Python Parallel Multiple AST", "Irrelevance Detection", "Relevance Detection"], "rows": [{"model": "Azure gpt-4o (FC)", "metrics": {"Live Overall Acc": {"OO": 70.1, "OA": 70.24, "AO": 67.8, "AA": 67.36}, "AST Summary": {"OO": 70.1, "OA": 70.24, "AO": 67.8, "AA": 67.36}, "Python Simple AST": {"OO": 70.93, "OA": 70.93, "AO": 66.67, "AA": 68.22}, "Python Multiple AST": {"OO": 70.09, "OA": 70.37, "AO": 68.0, "AA": 67.14}, "Python Parallel AST": {"OO": 62.5, "OA": 62.5, "AO": 75.0, "AA": 75.0}, "Python Parallel Multiple AST": {"OO": 66.67, "OA": 62.5, "AO": 66.67, "AA": 62.5}, "Irrelevance Detection": {"OO": 79.41, "OA": 80.2, "AO": 81.33, "AA": 81.9}, "Relevance Detection": {"OO": 87.5, "OA": 87.5, "AO": 81.25, "AA": 93.75}}}, {"model": "Azure gpt-5-mini (FC)", "metrics": {"Live Overall Acc": {"OO": 58.7, "OA": null, "AO": null, "AA": null}, "AST Summary": {"OO": 58.7, "OA": null, "AO": null, "AA": null}, "Python Simple AST": {"OO": 61.24, "OA": null, "AO": null, "AA": null}, "Python Multiple AST": {"OO": 58.59, "OA": null, "AO": null, "AA": null}, "Python Parallel AST": {"OO": 56.25, "OA": null, "AO": null, "AA": null}, "Python Parallel Multiple AST": {"OO": 37.5, "OA": null, "AO": null, "AA": null}, "Irrelevance Detection": {"OO": 89.59, "OA": null, "AO": null, "AA": null}, "Relevance Detection": {"OO": 68.75, "OA": null, "AO": null, "AA": null}}}, {"model": "Azure gpt-5.1-responses (FC)", "metrics": {"Live Overall Acc": {"OO": 63.8, "OA": 64.17, "AO": 61.81, "AA": 61.81}, "AST Summary": {"OO": 63.8, "OA": 64.17, "AO": 61.81, "AA": 61.81}, "Python Simple AST": {"OO": 66.67, "OA": 68.22, "AO": 59.69, "AA": 59.3}, "Python Multiple AST": {"OO": 63.15, "OA": 63.15, "AO": 62.2, "AA": 62.2}, "Python Parallel AST": {"OO": 56.25, "OA": 62.5, "AO": 68.75, "AA": 68.75}, "Python Parallel Multiple AST": {"OO": 66.67, "OA": 66.67, "AO": 62.5, "AA": 66.67}, "Irrelevance Detection": {"OO": 84.39, "OA": 83.37, "AO": 87.67, "AA": 87.56}, "Relevance Detection": {"OO": 68.75, "OA": 68.75, "AO": 75.0, "AA": 68.75}}}], "missing": []}, {"key": "data_multi_turn", "title": "Multi Turn", "metrics": ["Multi Turn Overall Acc", "Base", "Miss Func", "Miss Param", "Long Context"], "rows": [{"model": "Azure gpt-4o (FC)", "metrics": {"Multi Turn Overall Acc": {"OO": 42.38, "OA": 41.5, "AO": 42.12, "AA": 43.38}, "Base": {"OO": 53.5, "OA": 53.5, "AO": 53.0, "AA": 56.0}, "Miss Func": {"OO": 33.5, "OA": 31.0, "AO": 32.5, "AA": 36.0}, "Miss Param": {"OO": 34.0, "OA": 33.0, "AO": 34.5, "AA": 33.5}, "Long Context": {"OO": 48.5, "OA": 48.5, "AO": 48.5, "AA": 48.0}}}, {"model": "Azure gpt-5-mini (FC)", "metrics": {"Multi Turn Overall Acc": {"OO": 23.75, "OA": null, "AO": null, "AA": null}, "Base": {"OO": 32.5, "OA": null, "AO": null, "AA": null}, "Miss Func": {"OO": 13.5, "OA": null, "AO": null, "AA": null}, "Miss Param": {"OO": 21.0, "OA": null, "AO": null, "AA": null}, "Long Context": {"OO": 28.0, "OA": null, "AO": null, "AA": null}}}, {"model": "Azure gpt-5.1-responses (FC)", "metrics": {"Multi Turn Overall Acc": {"OO": 31.63, "OA": 31.13, "AO": 29.25, "AA": 27.12}, "Base": {"OO": 38.0, "OA": 39.5, "AO": 35.5, "AA": 33.0}, "Miss Func": {"OO": 28.5, "OA": 30.0, "AO": 28.5, "AA": 24.5}, "Miss Param": {"OO": 26.0, "OA": 24.0, "AO": 24.5, "AA": 23.5}, "Long Context": {"OO": 34.0, "OA": 31.0, "AO": 28.5, "AA": 27.5}}}], "missing": []}, {"key": "data_non_live", "title": "Non Live", "metrics": ["Non-Live Overall Acc", "AST Summary", "Simple AST", "Python Simple AST", "Java Simple AST", "JavaScript Simple AST", "Multiple AST", "Parallel AST", "Parallel Multiple AST", "Irrelevance Detection"], "rows": [{"model": "Azure gpt-4o (FC)", "metrics": {"Non-Live Overall Acc": {"OO": 84.67, "OA": 84.52, "AO": 83.19, "AA": 84.71}, "AST Summary": {"OO": 84.67, "OA": 84.52, "AO": 83.19, "AA": 84.71}, "Simple AST": {"OO": 76.67, "OA": 76.08, "AO": 74.25, "AA": 74.83}, "Python Simple AST": {"OO": 90.0, "OA": 89.25, "AO": 86.75, "AA": 86.5}, "Java Simple AST": {"OO": 66.0, "OA": 65.0, "AO": 66.0, "AA": 64.0}, "JavaScript Simple AST": {"OO": 74.0, "OA": 74.0, "AO": 70.0, "AA": 74.0}, "Multiple AST": {"OO": 91.5, "OA": 91.0, "AO": 88.5, "AA": 89.0}, "Parallel AST": {"OO": 90.5, "OA": 91.0, "AO": 91.0, "AA": 91.0}, "Parallel Multiple AST": {"OO": 80.0, "OA": 80.0, "AO": 79.0, "AA": 84.0}, "Irrelevance Detection": {"OO": 85.0, "OA": 85.42, "AO": 90.83, "AA": 89.58}}}, {"model": "Azure gpt-5-mini (FC)", "metrics": {"Non-Live Overall Acc": {"OO": 70.96, "OA": null, "AO": null, "AA": null}, "AST Summary": {"OO": 70.96, "OA": null, "AO": null, "AA": null}, "Simple AST": {"OO": 59.33, "OA": null, "AO": null, "AA": null}, "Python Simple AST": {"OO": 78.0, "OA": null, "AO": null, "AA": null}, "Java Simple AST": {"OO": 54.0, "OA": null, "AO": null, "AA": null}, "JavaScript Simple AST": {"OO": 46.0, "OA": null, "AO": null, "AA": null}, "Multiple AST": {"OO": 72.0, "OA": null, "AO": null, "AA": null}, "Parallel AST": {"OO": 83.5, "OA": null, "AO": null, "AA": null}, "Parallel Multiple AST": {"OO": 69.0, "OA": null, "AO": null, "AA": null}, "Irrelevance Detection": {"OO": 92.92, "OA": null, "AO": null, "AA": null}}}, {"model": "Azure gpt-5.1-responses (FC)", "metrics": {"Non-Live Overall Acc": {"OO": 81.81, "OA": 81.67, "AO": 79.1, "AA": 78.83}, "AST Summary": {"OO": 81.81, "OA": 81.67, "AO": 79.1, "AA": 78.83}, "Simple AST": {"OO": 72.25, "OA": 72.67, "AO": 73.42, "AA": 71.83}, "Python Simple AST": {"OO": 87.75, "OA": 88.0, "AO": 84.25, "AA": 84.5}, "Java Simple AST": {"OO": 63.0, "OA": 62.0, "AO": 64.0, "AA": 61.0}, "JavaScript Simple AST": {"OO": 66.0, "OA": 68.0, "AO": 72.0, "AA": 70.0}, "Multiple AST": {"OO": 88.5, "OA": 88.0, "AO": 86.0, "AA": 86.0}, "Parallel AST": {"OO": 86.5, "OA": 86.0, "AO": 82.5, "AA": 81.5}, "Parallel Multiple AST": {"OO": 80.0, "OA": 80.0, "AO": 74.5, "AA": 76.0}, "Irrelevance Detection": {"OO": 88.75, "OA": 87.92, "AO": 92.08, "AA": 92.08}}}], "missing": []}];
    const categoryTablesSummary = [{"key": "data_agentic", "title": "Agentic", "metrics": ["Agentic Overall Acc"], "rows": [{"model": "Azure gpt-4o (FC)", "metrics": {"Agentic Overall Acc": {"OO": 30.15, "OA": 28.37, "AO": 35.09, "AA": 36.48}}}, {"model": "Azure gpt-5-mini (FC)", "metrics": {"Agentic Overall Acc": {"OO": 55.86, "OA": null, "AO": null, "AA": null}}}, {"model": "Azure gpt-5.1-responses (FC)", "metrics": {"Agentic Overall Acc": {"OO": 27.12, "OA": 41.63, "AO": 43.13, "AA": 35.63}}}], "missing": []}, {"key": "data_agentic-web-search", "title": "Web Search", "metrics": ["Web Search Summary"], "rows": [{"model": "Azure gpt-4o (FC)", "metrics": {"Web Search Summary": {"OO": 39.0, "OA": 27.5, "AO": 42.0, "AA": 43.5}}}, {"model": "Azure gpt-5-mini (FC)", "metrics": {"Web Search Summary": {"OO": 68.5, "OA": null, "AO": null, "AA": null}}}, {"model": "Azure gpt-5.1-responses (FC)", "metrics": {"Web Search Summary": {"OO": 28.0, "OA": 52.5, "AO": 51.0, "AA": 36.0}}}], "missing": []}, {"key": "data_agentic-memory", "title": "Memory", "metrics": ["Memory Summary"], "rows": [{"model": "Azure gpt-4o (FC)", "metrics": {"Memory Summary": {"OO": 21.29, "OA": 29.25, "AO": 28.17, "AA": 29.46}}}, {"model": "Azure gpt-5-mini (FC)", "metrics": {"Memory Summary": {"OO": 43.23, "OA": null, "AO": null, "AA": null}}}, {"model": "Azure gpt-5.1-responses (FC)", "metrics": {"Memory Summary": {"OO": 26.24, "OA": 30.75, "AO": 35.27, "AA": 35.27}}}], "missing": []}, {"key": "data_live", "title": "Live", "metrics": ["Live Overall Acc"], "rows": [{"model": "Azure gpt-4o (FC)", "metrics": {"Live Overall Acc": {"OO": 70.1, "OA": 70.24, "AO": 67.8, "AA": 67.36}}}, {"model": "Azure gpt-5-mini (FC)", "metrics": {"Live Overall Acc": {"OO": 58.7, "OA": null, "AO": null, "AA": null}}}, {"model": "Azure gpt-5.1-responses (FC)", "metrics": {"Live Overall Acc": {"OO": 63.8, "OA": 64.17, "AO": 61.81, "AA": 61.81}}}], "missing": []}, {"key": "data_multi_turn", "title": "Multi Turn", "metrics": ["Multi Turn Overall Acc"], "rows": [{"model": "Azure gpt-4o (FC)", "metrics": {"Multi Turn Overall Acc": {"OO": 42.38, "OA": 41.5, "AO": 42.12, "AA": 43.38}}}, {"model": "Azure gpt-5-mini (FC)", "metrics": {"Multi Turn Overall Acc": {"OO": 23.75, "OA": null, "AO": null, "AA": null}}}, {"model": "Azure gpt-5.1-responses (FC)", "metrics": {"Multi Turn Overall Acc": {"OO": 31.63, "OA": 31.13, "AO": 29.25, "AA": 27.12}}}], "missing": []}, {"key": "data_non_live", "title": "Non Live", "metrics": ["Non-Live Overall Acc"], "rows": [{"model": "Azure gpt-4o (FC)", "metrics": {"Non-Live Overall Acc": {"OO": 84.67, "OA": 84.52, "AO": 83.19, "AA": 84.71}}}, {"model": "Azure gpt-5-mini (FC)", "metrics": {"Non-Live Overall Acc": {"OO": 70.96, "OA": null, "AO": null, "AA": null}}}, {"model": "Azure gpt-5.1-responses (FC)", "metrics": {"Non-Live Overall Acc": {"OO": 81.81, "OA": 81.67, "AO": 79.1, "AA": 78.83}}}], "missing": []}];
    const allModels = ["Azure gpt-4o (FC)", "Azure gpt-5-mini (FC)", "Azure gpt-5.1-responses (FC)"];
    const overallComponents = {"OO": {"Azure gpt-5-mini (FC)": {"non_live": 70.96, "live": 58.7, "irrelevance": 91.25, "multi_turn": 23.75, "web_search": 68.5, "memory": 43.23, "agentic": 55.864999999999995}, "Azure gpt-4o (FC)": {"non_live": 84.67, "live": 70.1, "irrelevance": 82.21, "multi_turn": 42.38, "web_search": 39.0, "memory": 21.29, "agentic": 30.145}, "Azure gpt-5.1-responses (FC)": {"non_live": 81.81, "live": 63.8, "irrelevance": 86.57, "multi_turn": 31.63, "web_search": 28.0, "memory": 26.24, "agentic": 27.119999999999997}}, "OA": {"Azure gpt-5.1-responses (FC)": {"non_live": 81.67, "live": 64.17, "irrelevance": 85.64, "multi_turn": 31.13, "web_search": 52.5, "memory": 30.75, "agentic": 41.625}, "Azure gpt-4o (FC)": {"non_live": 84.52, "live": 70.24, "irrelevance": 82.81, "multi_turn": 41.5, "web_search": 27.5, "memory": 29.25, "agentic": 28.375}}, "AO": {"Azure gpt-4o (FC)": {"non_live": 83.19, "live": 67.8, "irrelevance": 86.08, "multi_turn": 42.12, "web_search": 42.0, "memory": 28.17, "agentic": 35.085}, "Azure gpt-5.1-responses (FC)": {"non_live": 79.1, "live": 61.81, "irrelevance": 89.88, "multi_turn": 29.25, "web_search": 51.0, "memory": 35.27, "agentic": 43.135000000000005}}, "AA": {"Azure gpt-4o (FC)": {"non_live": 84.71, "live": 67.36, "irrelevance": 85.74, "multi_turn": 43.38, "web_search": 43.5, "memory": 29.46, "agentic": 36.480000000000004}, "Azure gpt-5.1-responses (FC)": {"non_live": 78.83, "live": 61.81, "irrelevance": 89.82, "multi_turn": 27.12, "web_search": 36.0, "memory": 35.27, "agentic": 35.635000000000005}}};
    const errorRecords = [{"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "web_search_base", "total": 100, "incorrect": 74, "errors": {"WRONG_ARGS": 74}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "web_search_no_snippet", "total": 100, "incorrect": 70, "errors": {"WRONG_ARGS": 69, "OTHER": 1}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_irrelevance", "total": 884, "incorrect": 138, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 138}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_multiple", "total": 1053, "incorrect": 388, "errors": {"OTHER": 52, "VALUE_FORMAT_ERROR": 261, "INVALID_JSON_OR_SCHEMA": 73, "MISSING_REQUIRED_ARGS": 1, "WRONG_ARGS": 1}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_parallel_multiple", "total": 24, "incorrect": 8, "errors": {"VALUE_FORMAT_ERROR": 5, "OTHER": 3}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_parallel", "total": 16, "incorrect": 7, "errors": {"VALUE_FORMAT_ERROR": 7}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_relevance", "total": 16, "incorrect": 5, "errors": {"INVALID_JSON_OR_SCHEMA": 5}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_simple", "total": 258, "incorrect": 86, "errors": {"VALUE_FORMAT_ERROR": 63, "INVALID_JSON_OR_SCHEMA": 12, "OTHER": 7, "TYPE_MISMATCH": 3, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_base", "total": 200, "incorrect": 124, "errors": {"WRONG_ARGS": 61, "OTHER": 63}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_long_context", "total": 200, "incorrect": 132, "errors": {"WRONG_ARGS": 70, "OTHER": 62}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_miss_func", "total": 200, "incorrect": 143, "errors": {"WRONG_ARGS": 61, "OTHER": 82}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_miss_param", "total": 200, "incorrect": 148, "errors": {"WRONG_ARGS": 75, "OTHER": 73}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "irrelevance", "total": 240, "incorrect": 27, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 27}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multiple", "total": 200, "incorrect": 23, "errors": {"VALUE_FORMAT_ERROR": 14, "OTHER": 4, "MISSING_REQUIRED_ARGS": 1, "INVALID_JSON_OR_SCHEMA": 4}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "parallel_multiple", "total": 200, "incorrect": 40, "errors": {"OTHER": 10, "VALUE_FORMAT_ERROR": 27, "MISSING_REQUIRED_ARGS": 2, "TYPE_MISMATCH": 1}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "parallel", "total": 200, "incorrect": 27, "errors": {"VALUE_FORMAT_ERROR": 19, "OTHER": 7, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "simple_javascript", "total": 50, "incorrect": 17, "errors": {"VALUE_FORMAT_ERROR": 7, "INVALID_JSON_OR_SCHEMA": 6, "WRONG_ARGS": 1, "TYPE_MISMATCH": 1, "OTHER": 2}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "simple_java", "total": 100, "incorrect": 37, "errors": {"INVALID_JSON_OR_SCHEMA": 6, "VALUE_FORMAT_ERROR": 12, "WRONG_ARGS": 19}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "simple_python", "total": 400, "incorrect": 49, "errors": {"TYPE_MISMATCH": 4, "VALUE_FORMAT_ERROR": 36, "INVALID_JSON_OR_SCHEMA": 2, "OTHER": 6, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "memory_kv", "total": 155, "incorrect": 130, "errors": {"WRONG_ARGS": 130}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "memory_rec_sum", "total": 155, "incorrect": 84, "errors": {"WRONG_ARGS": 84}}, {"condition": "OO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "memory_vector", "total": 155, "incorrect": 129, "errors": {"WRONG_ARGS": 129}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "web_search_base", "total": 100, "incorrect": 33, "errors": {"WRONG_ARGS": 31, "OTHER": 2}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "web_search_no_snippet", "total": 100, "incorrect": 30, "errors": {"WRONG_ARGS": 28, "OTHER": 2}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "live_irrelevance", "total": 884, "incorrect": 92, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 92}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "live_multiple", "total": 1053, "incorrect": 436, "errors": {"OTHER": 60, "VALUE_FORMAT_ERROR": 181, "INVALID_JSON_OR_SCHEMA": 194, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "live_parallel_multiple", "total": 24, "incorrect": 15, "errors": {"VALUE_FORMAT_ERROR": 9, "INVALID_JSON_OR_SCHEMA": 1, "OTHER": 5}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "live_parallel", "total": 16, "incorrect": 7, "errors": {"VALUE_FORMAT_ERROR": 3, "INVALID_JSON_OR_SCHEMA": 4}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "live_relevance", "total": 16, "incorrect": 5, "errors": {"INVALID_JSON_OR_SCHEMA": 5}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "live_simple", "total": 258, "incorrect": 100, "errors": {"VALUE_FORMAT_ERROR": 43, "INVALID_JSON_OR_SCHEMA": 46, "OTHER": 7, "WRONG_ARGS": 1, "TYPE_MISMATCH": 2, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "multi_turn_base", "total": 200, "incorrect": 135, "errors": {"WRONG_ARGS": 65, "OTHER": 70}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "multi_turn_long_context", "total": 200, "incorrect": 144, "errors": {"WRONG_ARGS": 72, "OTHER": 72}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "multi_turn_miss_func", "total": 200, "incorrect": 173, "errors": {"WRONG_ARGS": 41, "OTHER": 132}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "multi_turn_miss_param", "total": 200, "incorrect": 158, "errors": {"WRONG_ARGS": 66, "OTHER": 92}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "irrelevance", "total": 240, "incorrect": 17, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 17}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "multiple", "total": 200, "incorrect": 56, "errors": {"INVALID_JSON_OR_SCHEMA": 27, "VALUE_FORMAT_ERROR": 25, "MISSING_REQUIRED_ARGS": 1, "OTHER": 3}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "parallel_multiple", "total": 200, "incorrect": 62, "errors": {"INVALID_JSON_OR_SCHEMA": 6, "VALUE_FORMAT_ERROR": 40, "OTHER": 14, "MISSING_REQUIRED_ARGS": 1, "TYPE_MISMATCH": 1}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "parallel", "total": 200, "incorrect": 33, "errors": {"OTHER": 5, "INVALID_JSON_OR_SCHEMA": 12, "VALUE_FORMAT_ERROR": 15, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "simple_javascript", "total": 50, "incorrect": 27, "errors": {"INVALID_JSON_OR_SCHEMA": 14, "VALUE_FORMAT_ERROR": 9, "WRONG_ARGS": 1, "TYPE_MISMATCH": 1, "OTHER": 2}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "simple_java", "total": 100, "incorrect": 46, "errors": {"INVALID_JSON_OR_SCHEMA": 10, "VALUE_FORMAT_ERROR": 19, "WRONG_ARGS": 17}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "simple_python", "total": 400, "incorrect": 88, "errors": {"VALUE_FORMAT_ERROR": 49, "INVALID_JSON_OR_SCHEMA": 32, "TYPE_MISMATCH": 2, "OTHER": 4, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "memory_kv", "total": 155, "incorrect": 106, "errors": {"WRONG_ARGS": 104, "OTHER": 2}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "memory_rec_sum", "total": 155, "incorrect": 72, "errors": {"WRONG_ARGS": 72}}, {"condition": "OO", "model": "Azure gpt-5-mini (FC)", "test_category": "memory_vector", "total": 155, "incorrect": 86, "errors": {"WRONG_ARGS": 86}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "web_search_base", "total": 100, "incorrect": 61, "errors": {"WRONG_ARGS": 58, "OTHER": 3}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "web_search_no_snippet", "total": 100, "incorrect": 61, "errors": {"WRONG_ARGS": 57, "OTHER": 4}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "live_irrelevance", "total": 884, "incorrect": 182, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 182}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "live_multiple", "total": 1053, "incorrect": 315, "errors": {"OTHER": 66, "VALUE_FORMAT_ERROR": 221, "INVALID_JSON_OR_SCHEMA": 26, "MISSING_REQUIRED_ARGS": 1, "WRONG_ARGS": 1}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "live_parallel_multiple", "total": 24, "incorrect": 8, "errors": {"VALUE_FORMAT_ERROR": 5, "OTHER": 3}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "live_parallel", "total": 16, "incorrect": 6, "errors": {"VALUE_FORMAT_ERROR": 6}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "live_relevance", "total": 16, "incorrect": 2, "errors": {"INVALID_JSON_OR_SCHEMA": 2}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "live_simple", "total": 258, "incorrect": 75, "errors": {"VALUE_FORMAT_ERROR": 47, "INVALID_JSON_OR_SCHEMA": 7, "OTHER": 16, "WRONG_ARGS": 1, "TYPE_MISMATCH": 3, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_base", "total": 200, "incorrect": 93, "errors": {"WRONG_ARGS": 52, "OTHER": 41}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_long_context", "total": 200, "incorrect": 103, "errors": {"WRONG_ARGS": 63, "OTHER": 40}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_miss_func", "total": 200, "incorrect": 133, "errors": {"OTHER": 64, "WRONG_ARGS": 69}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_miss_param", "total": 200, "incorrect": 132, "errors": {"OTHER": 62, "WRONG_ARGS": 70}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "irrelevance", "total": 240, "incorrect": 36, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 36}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "multiple", "total": 200, "incorrect": 17, "errors": {"OTHER": 5, "MISSING_REQUIRED_ARGS": 1, "INVALID_JSON_OR_SCHEMA": 3, "VALUE_FORMAT_ERROR": 8}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "parallel_multiple", "total": 200, "incorrect": 40, "errors": {"VALUE_FORMAT_ERROR": 20, "OTHER": 17, "MISSING_REQUIRED_ARGS": 2, "TYPE_MISMATCH": 1}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "parallel", "total": 200, "incorrect": 19, "errors": {"VALUE_FORMAT_ERROR": 9, "OTHER": 9, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "simple_javascript", "total": 50, "incorrect": 13, "errors": {"WRONG_ARGS": 2, "INVALID_JSON_OR_SCHEMA": 1, "VALUE_FORMAT_ERROR": 5, "TYPE_MISMATCH": 1, "OTHER": 4}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "simple_java", "total": 100, "incorrect": 34, "errors": {"INVALID_JSON_OR_SCHEMA": 1, "VALUE_FORMAT_ERROR": 12, "WRONG_ARGS": 19, "OTHER": 2}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "simple_python", "total": 400, "incorrect": 40, "errors": {"TYPE_MISMATCH": 4, "VALUE_FORMAT_ERROR": 16, "INVALID_JSON_OR_SCHEMA": 3, "OTHER": 16, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "memory_kv", "total": 155, "incorrect": 133, "errors": {"WRONG_ARGS": 133}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "memory_rec_sum", "total": 155, "incorrect": 104, "errors": {"WRONG_ARGS": 104}}, {"condition": "OO", "model": "Azure gpt-4o (FC)", "test_category": "memory_vector", "total": 155, "incorrect": 129, "errors": {"WRONG_ARGS": 129}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "web_search_base", "total": 100, "incorrect": 44, "errors": {"WRONG_ARGS": 43, "OTHER": 1}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "web_search_no_snippet", "total": 100, "incorrect": 51, "errors": {"WRONG_ARGS": 51}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_irrelevance", "total": 884, "incorrect": 147, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 147}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_multiple", "total": 1053, "incorrect": 388, "errors": {"OTHER": 55, "VALUE_FORMAT_ERROR": 258, "INVALID_JSON_OR_SCHEMA": 73, "MISSING_REQUIRED_ARGS": 1, "WRONG_ARGS": 1}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_parallel_multiple", "total": 24, "incorrect": 8, "errors": {"VALUE_FORMAT_ERROR": 6, "OTHER": 2}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_parallel", "total": 16, "incorrect": 6, "errors": {"VALUE_FORMAT_ERROR": 6}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_relevance", "total": 16, "incorrect": 5, "errors": {"INVALID_JSON_OR_SCHEMA": 5}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_simple", "total": 258, "incorrect": 82, "errors": {"VALUE_FORMAT_ERROR": 61, "INVALID_JSON_OR_SCHEMA": 10, "OTHER": 7, "TYPE_MISMATCH": 3, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_base", "total": 200, "incorrect": 121, "errors": {"WRONG_ARGS": 59, "OTHER": 62}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_long_context", "total": 200, "incorrect": 138, "errors": {"WRONG_ARGS": 74, "OTHER": 64}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_miss_func", "total": 200, "incorrect": 140, "errors": {"OTHER": 88, "WRONG_ARGS": 52}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_miss_param", "total": 200, "incorrect": 152, "errors": {"WRONG_ARGS": 80, "OTHER": 72}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "irrelevance", "total": 240, "incorrect": 29, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 29}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multiple", "total": 200, "incorrect": 24, "errors": {"VALUE_FORMAT_ERROR": 16, "OTHER": 4, "MISSING_REQUIRED_ARGS": 1, "INVALID_JSON_OR_SCHEMA": 3}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "parallel_multiple", "total": 200, "incorrect": 40, "errors": {"VALUE_FORMAT_ERROR": 27, "OTHER": 10, "MISSING_REQUIRED_ARGS": 2, "TYPE_MISMATCH": 1}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "parallel", "total": 200, "incorrect": 28, "errors": {"VALUE_FORMAT_ERROR": 19, "OTHER": 7, "MISSING_REQUIRED_ARGS": 1, "INVALID_JSON_OR_SCHEMA": 1}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "simple_javascript", "total": 50, "incorrect": 16, "errors": {"VALUE_FORMAT_ERROR": 8, "INVALID_JSON_OR_SCHEMA": 3, "WRONG_ARGS": 1, "TYPE_MISMATCH": 1, "OTHER": 3}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "simple_java", "total": 100, "incorrect": 38, "errors": {"VALUE_FORMAT_ERROR": 16, "INVALID_JSON_OR_SCHEMA": 3, "WRONG_ARGS": 19}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "simple_python", "total": 400, "incorrect": 48, "errors": {"TYPE_MISMATCH": 4, "VALUE_FORMAT_ERROR": 35, "OTHER": 6, "INVALID_JSON_OR_SCHEMA": 2, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "memory_kv", "total": 155, "incorrect": 121, "errors": {"WRONG_ARGS": 121}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "memory_rec_sum", "total": 155, "incorrect": 67, "errors": {"WRONG_ARGS": 67}}, {"condition": "OA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "memory_vector", "total": 155, "incorrect": 134, "errors": {"WRONG_ARGS": 134}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "web_search_base", "total": 100, "incorrect": 69, "errors": {"WRONG_ARGS": 53, "OTHER": 16}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "web_search_no_snippet", "total": 100, "incorrect": 76, "errors": {"OTHER": 38, "WRONG_ARGS": 38}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "live_irrelevance", "total": 884, "incorrect": 175, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 175}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "live_multiple", "total": 1053, "incorrect": 312, "errors": {"OTHER": 71, "VALUE_FORMAT_ERROR": 213, "INVALID_JSON_OR_SCHEMA": 26, "MISSING_REQUIRED_ARGS": 1, "WRONG_ARGS": 1}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "live_parallel_multiple", "total": 24, "incorrect": 9, "errors": {"VALUE_FORMAT_ERROR": 7, "OTHER": 2}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "live_parallel", "total": 16, "incorrect": 6, "errors": {"VALUE_FORMAT_ERROR": 6}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "live_relevance", "total": 16, "incorrect": 2, "errors": {"INVALID_JSON_OR_SCHEMA": 2}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "live_simple", "total": 258, "incorrect": 75, "errors": {"VALUE_FORMAT_ERROR": 45, "INVALID_JSON_OR_SCHEMA": 7, "OTHER": 18, "WRONG_ARGS": 1, "TYPE_MISMATCH": 3, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_base", "total": 200, "incorrect": 93, "errors": {"WRONG_ARGS": 49, "OTHER": 44}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_long_context", "total": 200, "incorrect": 103, "errors": {"WRONG_ARGS": 59, "OTHER": 44}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_miss_func", "total": 200, "incorrect": 138, "errors": {"WRONG_ARGS": 65, "OTHER": 73}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_miss_param", "total": 200, "incorrect": 134, "errors": {"WRONG_ARGS": 69, "OTHER": 65}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "irrelevance", "total": 240, "incorrect": 35, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 35}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "multiple", "total": 200, "incorrect": 18, "errors": {"OTHER": 6, "MISSING_REQUIRED_ARGS": 1, "INVALID_JSON_OR_SCHEMA": 3, "VALUE_FORMAT_ERROR": 8}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "parallel_multiple", "total": 200, "incorrect": 40, "errors": {"VALUE_FORMAT_ERROR": 20, "OTHER": 17, "MISSING_REQUIRED_ARGS": 2, "TYPE_MISMATCH": 1}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "parallel", "total": 200, "incorrect": 18, "errors": {"VALUE_FORMAT_ERROR": 10, "OTHER": 7, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "simple_javascript", "total": 50, "incorrect": 13, "errors": {"VALUE_FORMAT_ERROR": 5, "WRONG_ARGS": 3, "TYPE_MISMATCH": 1, "OTHER": 3, "INVALID_JSON_OR_SCHEMA": 1}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "simple_java", "total": 100, "incorrect": 35, "errors": {"INVALID_JSON_OR_SCHEMA": 1, "VALUE_FORMAT_ERROR": 12, "WRONG_ARGS": 20, "OTHER": 2}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "simple_python", "total": 400, "incorrect": 43, "errors": {"TYPE_MISMATCH": 4, "VALUE_FORMAT_ERROR": 19, "OTHER": 17, "INVALID_JSON_OR_SCHEMA": 2, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "memory_kv", "total": 155, "incorrect": 131, "errors": {"WRONG_ARGS": 131}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "memory_rec_sum", "total": 155, "incorrect": 78, "errors": {"WRONG_ARGS": 78}}, {"condition": "OA", "model": "Azure gpt-4o (FC)", "test_category": "memory_vector", "total": 155, "incorrect": 120, "errors": {"WRONG_ARGS": 120}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "web_search_base", "total": 100, "incorrect": 45, "errors": {"WRONG_ARGS": 45}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "web_search_no_snippet", "total": 100, "incorrect": 53, "errors": {"WRONG_ARGS": 53}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_irrelevance", "total": 884, "incorrect": 109, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 109}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_multiple", "total": 1053, "incorrect": 398, "errors": {"OTHER": 41, "VALUE_FORMAT_ERROR": 221, "INVALID_JSON_OR_SCHEMA": 134, "MISSING_REQUIRED_ARGS": 1, "WRONG_ARGS": 1}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_parallel_multiple", "total": 24, "incorrect": 9, "errors": {"VALUE_FORMAT_ERROR": 6, "OTHER": 3}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_parallel", "total": 16, "incorrect": 5, "errors": {"VALUE_FORMAT_ERROR": 4, "OTHER": 1}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_relevance", "total": 16, "incorrect": 4, "errors": {"INVALID_JSON_OR_SCHEMA": 4}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_simple", "total": 258, "incorrect": 104, "errors": {"INVALID_JSON_OR_SCHEMA": 30, "VALUE_FORMAT_ERROR": 63, "OTHER": 7, "TYPE_MISMATCH": 3, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_base", "total": 200, "incorrect": 129, "errors": {"WRONG_ARGS": 67, "OTHER": 62}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_long_context", "total": 200, "incorrect": 143, "errors": {"WRONG_ARGS": 75, "OTHER": 68}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_miss_func", "total": 200, "incorrect": 143, "errors": {"OTHER": 82, "WRONG_ARGS": 61}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_miss_param", "total": 200, "incorrect": 151, "errors": {"WRONG_ARGS": 72, "OTHER": 79}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "irrelevance", "total": 240, "incorrect": 19, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 19}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multiple", "total": 200, "incorrect": 28, "errors": {"VALUE_FORMAT_ERROR": 19, "OTHER": 1, "MISSING_REQUIRED_ARGS": 1, "INVALID_JSON_OR_SCHEMA": 7}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "parallel_multiple", "total": 200, "incorrect": 51, "errors": {"VALUE_FORMAT_ERROR": 37, "OTHER": 11, "MISSING_REQUIRED_ARGS": 2, "TYPE_MISMATCH": 1}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "parallel", "total": 200, "incorrect": 35, "errors": {"VALUE_FORMAT_ERROR": 28, "OTHER": 6, "INVALID_JSON_OR_SCHEMA": 1}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "simple_javascript", "total": 50, "incorrect": 14, "errors": {"VALUE_FORMAT_ERROR": 5, "INVALID_JSON_OR_SCHEMA": 6, "WRONG_ARGS": 1, "TYPE_MISMATCH": 1, "OTHER": 1}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "simple_java", "total": 100, "incorrect": 36, "errors": {"INVALID_JSON_OR_SCHEMA": 6, "VALUE_FORMAT_ERROR": 10, "WRONG_ARGS": 20}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "simple_python", "total": 400, "incorrect": 63, "errors": {"TYPE_MISMATCH": 4, "INVALID_JSON_OR_SCHEMA": 13, "VALUE_FORMAT_ERROR": 44, "OTHER": 1, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "memory_kv", "total": 155, "incorrect": 116, "errors": {"WRONG_ARGS": 116}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "memory_rec_sum", "total": 155, "incorrect": 60, "errors": {"WRONG_ARGS": 60}}, {"condition": "AO", "model": "Azure gpt-5.1-responses (FC)", "test_category": "memory_vector", "total": 155, "incorrect": 125, "errors": {"WRONG_ARGS": 125}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "web_search_base", "total": 100, "incorrect": 57, "errors": {"WRONG_ARGS": 51, "OTHER": 6}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "web_search_no_snippet", "total": 100, "incorrect": 59, "errors": {"WRONG_ARGS": 54, "OTHER": 5}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "live_irrelevance", "total": 884, "incorrect": 165, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 165}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "live_multiple", "total": 1053, "incorrect": 337, "errors": {"OTHER": 61, "VALUE_FORMAT_ERROR": 240, "INVALID_JSON_OR_SCHEMA": 34, "MISSING_REQUIRED_ARGS": 1, "WRONG_ARGS": 1}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "live_parallel_multiple", "total": 24, "incorrect": 8, "errors": {"VALUE_FORMAT_ERROR": 5, "OTHER": 3}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "live_parallel", "total": 16, "incorrect": 4, "errors": {"VALUE_FORMAT_ERROR": 4}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "live_relevance", "total": 16, "incorrect": 3, "errors": {"INVALID_JSON_OR_SCHEMA": 3}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "live_simple", "total": 258, "incorrect": 86, "errors": {"VALUE_FORMAT_ERROR": 53, "INVALID_JSON_OR_SCHEMA": 15, "OTHER": 14, "TYPE_MISMATCH": 3, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_base", "total": 200, "incorrect": 94, "errors": {"WRONG_ARGS": 49, "OTHER": 45}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_long_context", "total": 200, "incorrect": 103, "errors": {"WRONG_ARGS": 59, "OTHER": 44}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_miss_func", "total": 200, "incorrect": 135, "errors": {"WRONG_ARGS": 55, "OTHER": 80}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_miss_param", "total": 200, "incorrect": 131, "errors": {"OTHER": 58, "WRONG_ARGS": 73}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "irrelevance", "total": 240, "incorrect": 22, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 22}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "multiple", "total": 200, "incorrect": 23, "errors": {"VALUE_FORMAT_ERROR": 10, "OTHER": 7, "INVALID_JSON_OR_SCHEMA": 6}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "parallel_multiple", "total": 200, "incorrect": 42, "errors": {"VALUE_FORMAT_ERROR": 26, "OTHER": 15, "TYPE_MISMATCH": 1}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "parallel", "total": 200, "incorrect": 18, "errors": {"VALUE_FORMAT_ERROR": 13, "OTHER": 4, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "simple_javascript", "total": 50, "incorrect": 15, "errors": {"VALUE_FORMAT_ERROR": 7, "INVALID_JSON_OR_SCHEMA": 1, "WRONG_ARGS": 2, "OTHER": 5}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "simple_java", "total": 100, "incorrect": 34, "errors": {"INVALID_JSON_OR_SCHEMA": 1, "VALUE_FORMAT_ERROR": 13, "WRONG_ARGS": 19, "OTHER": 1}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "simple_python", "total": 400, "incorrect": 53, "errors": {"TYPE_MISMATCH": 4, "VALUE_FORMAT_ERROR": 27, "OTHER": 17, "INVALID_JSON_OR_SCHEMA": 5}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "memory_kv", "total": 155, "incorrect": 128, "errors": {"WRONG_ARGS": 128}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "memory_rec_sum", "total": 155, "incorrect": 88, "errors": {"WRONG_ARGS": 88}}, {"condition": "AO", "model": "Azure gpt-4o (FC)", "test_category": "memory_vector", "total": 155, "incorrect": 118, "errors": {"WRONG_ARGS": 118}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "web_search_base", "total": 100, "incorrect": 64, "errors": {"WRONG_ARGS": 64}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "web_search_no_snippet", "total": 100, "incorrect": 64, "errors": {"WRONG_ARGS": 64}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_irrelevance", "total": 884, "incorrect": 110, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 110}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_multiple", "total": 1053, "incorrect": 398, "errors": {"OTHER": 46, "VALUE_FORMAT_ERROR": 221, "INVALID_JSON_OR_SCHEMA": 129, "MISSING_REQUIRED_ARGS": 1, "WRONG_ARGS": 1}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_parallel_multiple", "total": 24, "incorrect": 8, "errors": {"VALUE_FORMAT_ERROR": 6, "OTHER": 2}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_parallel", "total": 16, "incorrect": 5, "errors": {"VALUE_FORMAT_ERROR": 4, "OTHER": 1}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_relevance", "total": 16, "incorrect": 5, "errors": {"INVALID_JSON_OR_SCHEMA": 5}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "live_simple", "total": 258, "incorrect": 105, "errors": {"VALUE_FORMAT_ERROR": 69, "INVALID_JSON_OR_SCHEMA": 26, "OTHER": 6, "TYPE_MISMATCH": 3, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_base", "total": 200, "incorrect": 134, "errors": {"WRONG_ARGS": 66, "OTHER": 68}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_long_context", "total": 200, "incorrect": 145, "errors": {"WRONG_ARGS": 75, "OTHER": 70}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_miss_func", "total": 200, "incorrect": 151, "errors": {"WRONG_ARGS": 66, "OTHER": 85}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multi_turn_miss_param", "total": 200, "incorrect": 153, "errors": {"WRONG_ARGS": 69, "OTHER": 84}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "irrelevance", "total": 240, "incorrect": 19, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 19}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "multiple", "total": 200, "incorrect": 28, "errors": {"VALUE_FORMAT_ERROR": 21, "OTHER": 1, "MISSING_REQUIRED_ARGS": 1, "INVALID_JSON_OR_SCHEMA": 5}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "parallel_multiple", "total": 200, "incorrect": 48, "errors": {"VALUE_FORMAT_ERROR": 36, "OTHER": 9, "MISSING_REQUIRED_ARGS": 2, "TYPE_MISMATCH": 1}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "parallel", "total": 200, "incorrect": 37, "errors": {"VALUE_FORMAT_ERROR": 28, "OTHER": 5, "MISSING_REQUIRED_ARGS": 1, "INVALID_JSON_OR_SCHEMA": 3}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "simple_javascript", "total": 50, "incorrect": 15, "errors": {"VALUE_FORMAT_ERROR": 4, "INVALID_JSON_OR_SCHEMA": 6, "WRONG_ARGS": 2, "TYPE_MISMATCH": 1, "OTHER": 2}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "simple_java", "total": 100, "incorrect": 39, "errors": {"INVALID_JSON_OR_SCHEMA": 7, "VALUE_FORMAT_ERROR": 12, "WRONG_ARGS": 20}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "simple_python", "total": 400, "incorrect": 62, "errors": {"TYPE_MISMATCH": 4, "INVALID_JSON_OR_SCHEMA": 13, "VALUE_FORMAT_ERROR": 43, "OTHER": 1, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "memory_kv", "total": 155, "incorrect": 122, "errors": {"WRONG_ARGS": 122}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "memory_rec_sum", "total": 155, "incorrect": 53, "errors": {"WRONG_ARGS": 53}}, {"condition": "AA", "model": "Azure gpt-5.1-responses (FC)", "test_category": "memory_vector", "total": 155, "incorrect": 126, "errors": {"WRONG_ARGS": 126}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "web_search_base", "total": 100, "incorrect": 55, "errors": {"WRONG_ARGS": 47, "OTHER": 8}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "web_search_no_snippet", "total": 100, "incorrect": 58, "errors": {"WRONG_ARGS": 55, "OTHER": 3}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "live_irrelevance", "total": 884, "incorrect": 160, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 160}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "live_multiple", "total": 1053, "incorrect": 346, "errors": {"OTHER": 65, "VALUE_FORMAT_ERROR": 240, "INVALID_JSON_OR_SCHEMA": 39, "MISSING_REQUIRED_ARGS": 1, "WRONG_ARGS": 1}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "live_parallel_multiple", "total": 24, "incorrect": 9, "errors": {"VALUE_FORMAT_ERROR": 6, "OTHER": 3}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "live_parallel", "total": 16, "incorrect": 4, "errors": {"VALUE_FORMAT_ERROR": 4}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "live_relevance", "total": 16, "incorrect": 1, "errors": {"INVALID_JSON_OR_SCHEMA": 1}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "live_simple", "total": 258, "incorrect": 82, "errors": {"VALUE_FORMAT_ERROR": 48, "INVALID_JSON_OR_SCHEMA": 13, "OTHER": 17, "TYPE_MISMATCH": 3, "MISSING_REQUIRED_ARGS": 1}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_base", "total": 200, "incorrect": 88, "errors": {"WRONG_ARGS": 44, "OTHER": 44}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_long_context", "total": 200, "incorrect": 104, "errors": {"WRONG_ARGS": 60, "OTHER": 44}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_miss_func", "total": 200, "incorrect": 128, "errors": {"OTHER": 74, "WRONG_ARGS": 54}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "multi_turn_miss_param", "total": 200, "incorrect": 133, "errors": {"WRONG_ARGS": 72, "OTHER": 61}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "irrelevance", "total": 240, "incorrect": 25, "errors": {"SHOULD_ABSTAIN_BUT_CALLED": 25}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "multiple", "total": 200, "incorrect": 22, "errors": {"VALUE_FORMAT_ERROR": 11, "OTHER": 6, "INVALID_JSON_OR_SCHEMA": 5}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "parallel_multiple", "total": 200, "incorrect": 32, "errors": {"VALUE_FORMAT_ERROR": 20, "OTHER": 11, "TYPE_MISMATCH": 1}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "parallel", "total": 200, "incorrect": 18, "errors": {"VALUE_FORMAT_ERROR": 13, "OTHER": 5}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "simple_javascript", "total": 50, "incorrect": 13, "errors": {"VALUE_FORMAT_ERROR": 6, "WRONG_ARGS": 2, "TYPE_MISMATCH": 1, "OTHER": 3, "INVALID_JSON_OR_SCHEMA": 1}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "simple_java", "total": 100, "incorrect": 36, "errors": {"INVALID_JSON_OR_SCHEMA": 1, "VALUE_FORMAT_ERROR": 13, "WRONG_ARGS": 20, "OTHER": 2}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "simple_python", "total": 400, "incorrect": 54, "errors": {"TYPE_MISMATCH": 4, "VALUE_FORMAT_ERROR": 24, "OTHER": 21, "INVALID_JSON_OR_SCHEMA": 5}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "memory_kv", "total": 155, "incorrect": 125, "errors": {"WRONG_ARGS": 125}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "memory_rec_sum", "total": 155, "incorrect": 78, "errors": {"WRONG_ARGS": 78}}, {"condition": "AA", "model": "Azure gpt-4o (FC)", "test_category": "memory_vector", "total": 155, "incorrect": 125, "errors": {"WRONG_ARGS": 125}}];
    const errorGroups = {"data_non_live": {"Non-Live Overall Acc": ["simple_python", "simple_java", "simple_javascript", "multiple", "parallel", "parallel_multiple"], "AST Summary": ["simple_python", "simple_java", "simple_javascript", "multiple", "parallel", "parallel_multiple"], "Simple AST": ["simple_python", "simple_java", "simple_javascript"], "Python Simple AST": ["simple_python"], "Java Simple AST": ["simple_java"], "JavaScript Simple AST": ["simple_javascript"], "Multiple AST": ["multiple"], "Parallel AST": ["parallel"], "Parallel Multiple AST": ["parallel_multiple"], "Irrelevance Detection": ["irrelevance"]}, "data_live": {"Live Overall Acc": ["live_simple", "live_multiple", "live_parallel", "live_parallel_multiple"], "AST Summary": ["live_simple", "live_multiple", "live_parallel", "live_parallel_multiple"], "Python Simple AST": ["live_simple"], "Python Multiple AST": ["live_multiple"], "Python Parallel AST": ["live_parallel"], "Python Parallel Multiple AST": ["live_parallel_multiple"], "Irrelevance Detection": ["live_irrelevance"], "Relevance Detection": ["live_relevance"]}, "data_multi_turn": {"Multi Turn Overall Acc": ["multi_turn_base", "multi_turn_miss_func", "multi_turn_miss_param", "multi_turn_long_context"], "Base": ["multi_turn_base"], "Miss Func": ["multi_turn_miss_func"], "Miss Param": ["multi_turn_miss_param"], "Long Context": ["multi_turn_long_context"]}, "data_agentic": {"Agentic Overall Acc": ["web_search_base", "web_search_no_snippet", "memory_kv", "memory_vector", "memory_rec_sum"], "Web Search Summary": ["web_search_base", "web_search_no_snippet"], "Web Search Base": ["web_search_base"], "Web Search No Snippet": ["web_search_no_snippet"], "Memory Summary": ["memory_kv", "memory_vector", "memory_rec_sum"], "Memory KV": ["memory_kv"], "Memory Vector": ["memory_vector"], "Memory Recursive Summarization": ["memory_rec_sum"]}, "data_agentic-web": {"Web Search Summary": ["web_search_base", "web_search_no_snippet"], "Web Search Base": ["web_search_base"], "Web Search No Snippet": ["web_search_no_snippet"]}, "data_agentic-memory": {"Memory Summary": ["memory_kv", "memory_vector", "memory_rec_sum"], "Memory KV": ["memory_kv"], "Memory Vector": ["memory_vector"], "Memory Recursive Summarization": ["memory_rec_sum"]}};
    const conditions = ["OO", "OA", "AO", "AA"];
    const tableState = {};
    const barState = {};

    function setActiveTab(tabId) {
      const resultsTab = document.getElementById("resultsTab");
      const plotsTab = document.getElementById("plotsTab");
      const tabResults = document.getElementById("tabResults");
      const tabPlots = document.getElementById("tabPlots");
      if (!resultsTab || !plotsTab || !tabResults || !tabPlots) {
        return;
      }
      const showPlots = tabId === "plots";
      resultsTab.classList.toggle("active", !showPlots);
      plotsTab.classList.toggle("active", showPlots);
      tabResults.classList.toggle("active", !showPlots);
      tabPlots.classList.toggle("active", showPlots);
      updatePlot();
      updateHeatmaps();
      updateContribution();
    }

    function setPlotView(viewId) {
      const scatterView = document.getElementById("plots_scatter_view");
      const heatmapView = document.getElementById("plots_heatmap_view");
      const contribView = document.getElementById("plots_contrib_view");
      const errorsView = document.getElementById("plots_errors_view");
      const tabScatter = document.getElementById("plotTabScatter");
      const tabHeatmap = document.getElementById("plotTabHeatmap");
      const tabContrib = document.getElementById("plotTabContribution");
      const tabErrors = document.getElementById("plotTabErrors");
      if (
        !scatterView ||
        !heatmapView ||
        !contribView ||
        !errorsView ||
        !tabScatter ||
        !tabHeatmap ||
        !tabContrib ||
        !tabErrors
      ) {
        return;
      }
      const showScatter = viewId === "scatter";
      const showHeatmap = viewId === "heatmap";
      const showContrib = viewId === "contrib";
      const showErrors = viewId === "errors";
      scatterView.classList.toggle("active", showScatter);
      heatmapView.classList.toggle("active", showHeatmap);
      contribView.classList.toggle("active", showContrib);
      errorsView.classList.toggle("active", showErrors);
      tabScatter.classList.toggle("active", showScatter);
      tabHeatmap.classList.toggle("active", showHeatmap);
      tabContrib.classList.toggle("active", showContrib);
      tabErrors.classList.toggle("active", showErrors);
      buildPlotCategoryFilter();
      updatePlot();
      updateHeatmaps();
      updateContribution();
      updateErrorPlots();
    }

    function isNumber(value) {
      return typeof value === "number" && !Number.isNaN(value);
    }

    function isExcludeWebSearch() {
      const checkbox = document.getElementById("excludeWebSearch");
      return checkbox ? checkbox.checked : false;
    }

    function getOverallRowValue(row, condition) {
      if (!isExcludeWebSearch()) {
        return row[condition];
      }
      const key = `${condition}_excl_web`;
      return isNumber(row[key]) ? row[key] : row[condition];
    }

    function getSummaryTableByKey(tableKey) {
      return categoryTablesSummary.find((table) => table.key === tableKey) || null;
    }

    function getAgenticMemorySummary(model, condition) {
      const memoryTable = getSummaryTableByKey("data_agentic-memory");
      if (!memoryTable) {
        return null;
      }
      const row = memoryTable.rows.find((item) => item.model === model);
      if (!row) {
        return null;
      }
      const metricValues = row.metrics["Memory Summary"] || {};
      return metricValues[condition];
    }

    function getMetricDisplayLabel(metric, table) {
      if (
        isExcludeWebSearch() &&
        table.title.toLowerCase().includes("agentic") &&
        String(metric).toLowerCase().includes("agentic overall")
      ) {
        return "Agentic (memory-only)";
      }
      return String(metric || "");
    }

    function getMetricDisplayValue(row, metric, table, condition) {
      if (
        isExcludeWebSearch() &&
        table.title.toLowerCase().includes("agentic") &&
        String(metric).toLowerCase().includes("agentic overall")
      ) {
        return getAgenticMemorySummary(row.model, condition);
      }
      const metricValues = row.metrics[metric] || {};
      return metricValues[condition];
    }

    function updateOverallLabel() {
      const label = document.getElementById("overallLabel");
      if (!label) {
        return;
      }
      if (isExcludeWebSearch()) {
        label.textContent = "Overall (excl. web_search)";
        label.style.display = "";
      } else {
        label.textContent = "";
        label.style.display = "none";
      }
    }

    function toFixed(value, digits) {
      return isNumber(value) ? value.toFixed(digits) : MISSING;
    }

    function formatDelta(acc, baseline, mode) {
      if (!isNumber(acc) || !isNumber(baseline)) {
        return MISSING;
      }
      if (mode === "rel") {
        if (baseline === 0) {
          return MISSING;
        }
        const rel = ((acc - baseline) / baseline) * 100;
        return (rel >= 0 ? "+" : "") + rel.toFixed(2) + "%";
      }
      const delta = acc - baseline;
      return (delta >= 0 ? "+" : "") + delta.toFixed(2);
    }

    function computeDeltaValue(acc, baseline, mode) {
      if (!isNumber(acc) || !isNumber(baseline)) {
        return null;
      }
      if (mode === "rel") {
        if (baseline === 0) {
          return null;
        }
        return ((acc - baseline) / baseline) * 100;
      }
      return acc - baseline;
    }

    function buildTableIndex(tables) {
      const index = {};
      tables.forEach((table) => {
        const modelMap = {};
        table.rows.forEach((row) => {
          modelMap[row.model] = row.metrics;
        });
        index[table.key] = modelMap;
      });
      return index;
    }

    const tableIndexFull = buildTableIndex(categoryTablesFull);
    const tableIndexSummary = buildTableIndex(categoryTablesSummary);

    function buildTableSelect() {
      const select = document.getElementById("tableSelect");
      const tables = getCategoryTables();
      select.innerHTML = "";
      const mainOption = document.createElement("option");
      mainOption.value = "main";
      mainOption.textContent = "Main";
      select.appendChild(mainOption);
      const allOption = document.createElement("option");
      allOption.value = "all";
      allOption.textContent = "All";
      select.appendChild(allOption);
      tables.forEach((table) => {
        const option = document.createElement("option");
        option.value = table.key;
        option.textContent = table.title;
        select.appendChild(option);
      });
      if (!Array.from(select.options).some((option) => option.value === select.value)) {
        select.value = "main";
      }
    }

    function buildPlotCategoryFilter() {
      const select = document.getElementById("plotCategoryFilter");
      if (!select) {
        return;
      }
      const tables = getCategoryTables();
      const selected = select.value || "all";
      select.innerHTML = "";
      const allOption = document.createElement("option");
      allOption.value = "all";
      allOption.textContent = "All";
      select.appendChild(allOption);
      tables.forEach((table) => {
        const option = document.createElement("option");
        option.value = table.key;
        option.textContent = table.title;
        select.appendChild(option);
      });
      if (Array.from(select.options).some((option) => option.value === selected)) {
        select.value = selected;
      }
    }

    function buildModelFilter() {
      const select = document.getElementById("modelFilter");
      select.innerHTML = "";
      allModels.forEach((model) => {
        const option = document.createElement("option");
        option.value = model;
        option.textContent = model;
        option.selected = true;
        select.appendChild(option);
      });
    }

    function getSelectedModels() {
      const select = document.getElementById("modelFilter");
      const values = Array.from(select.selectedOptions).map((option) => option.value);
      if (values.length === 0) {
        return new Set(allModels);
      }
      return new Set(values);
    }

    function renderMainTable() {
      const body = document.getElementById("tableBody");
      const mode = document.getElementById("deltaMode").value;
      const selected = getSelectedModels();
      body.innerHTML = "";
      const tableKey = "main";
      const sortedRows = getSortedRows(tableKey, mainRows);
      sortedRows.forEach((row) => {
        if (!selected.has(row.model)) {
          return;
        }
        const tr = document.createElement("tr");
        const baseline = getOverallRowValue(row, "OO");
        const values = conditions.map((condition) => getOverallRowValue(row, condition));
        const bestAcc = Math.max(...values.filter((value) => isNumber(value)));

        function buildCell(label, value, isBaseline, condition) {
          const td = document.createElement("td");
          if (label === "Model") {
            td.textContent = value ?? MISSING;
            return td;
          }
          const accText = toFixed(value, 2);
          if (condition === "OO") {
            td.textContent = accText;
          } else {
            const deltaText = formatDelta(value, baseline, mode);
            td.textContent = accText + " (" + deltaText + ")";
          }
          if (isBaseline) {
            td.classList.add("baseline");
          }
          if (isNumber(value) && isNumber(bestAcc) && value === bestAcc) {
            td.classList.add("best");
          }
          return td;
        }

        tr.appendChild(buildCell("Model", row.model, false, "Model"));
        tr.appendChild(buildCell("OO", getOverallRowValue(row, "OO"), true, "OO"));
        tr.appendChild(buildCell("OA", getOverallRowValue(row, "OA"), false, "OA"));
        tr.appendChild(buildCell("AO", getOverallRowValue(row, "AO"), false, "AO"));
        tr.appendChild(buildCell("AA", getOverallRowValue(row, "AA"), false, "AA"));
        body.appendChild(tr);
      });
    }

    function getSortValueMain(row, key, mode) {
      if (key === "model") {
        return row.model ? row.model.toLowerCase() : "";
      }
      if (key.endsWith("_delta")) {
        const condition = key.split("_")[0];
        if (condition === "OO") {
          return 0;
        }
        const acc = getOverallRowValue(row, condition);
        const baseline = getOverallRowValue(row, "OO");
        if (!isNumber(acc) || !isNumber(baseline)) {
          return Number.NEGATIVE_INFINITY;
        }
        if (mode === "rel") {
          return baseline === 0 ? Number.NEGATIVE_INFINITY : ((acc - baseline) / baseline) * 100;
        }
        return acc - baseline;
      }
      const value = getOverallRowValue(row, key);
      if (isNumber(value)) {
        return value;
      }
      return Number.NEGATIVE_INFINITY;
    }

    function getSortValueDetail(row, sortSpec, table) {
      if (sortSpec.key === "model") {
        return row.model ? row.model.toLowerCase() : "";
      }
      const metric = sortSpec.metric;
      const condition = sortSpec.condition;
      const value = table
        ? getMetricDisplayValue(row, metric, table, condition)
        : (row.metrics[metric] || {})[condition];
      if (isNumber(value)) {
        return value;
      }
      return Number.NEGATIVE_INFINITY;
    }

    function getSortedRows(tableKey, rows) {
      const mode = document.getElementById("deltaMode").value;
      const state = tableState[tableKey];
      const sortKey = state ? state.sortKey : null;
      const sortDir = state ? state.sortDir : null;
      const multiplier = sortDir === "asc" ? 1 : -1;
      const sortSpec = sortKey ? buildSortSpec(tableKey, sortKey) : null;
      const table = tableKey === "main" ? null : getTableByKey(tableKey);
      const sorted = rows.slice();
      sorted.sort((a, b) => {
        let av;
        let bv;
        if (sortKey) {
          if (tableKey === "main") {
            av = getSortValueMain(a, sortKey, mode);
            bv = getSortValueMain(b, sortKey, mode);
          } else {
            av = getSortValueDetail(a, sortSpec, table);
            bv = getSortValueDetail(b, sortSpec, table);
          }
          if (av > bv) return 1 * multiplier;
          if (av < bv) return -1 * multiplier;
        }
        return a.model.localeCompare(b.model);
      });
      return sorted;
    }

    function buildSortSpec(tableKey, sortKey) {
      if (tableKey === "main") {
        return { key: sortKey };
      }
      const [metric, condition] = sortKey.split("::");
      return { key: sortKey, metric, condition };
    }

    function getTableByKey(tableKey) {
      return getCategoryTables().find((table) => table.key === tableKey) || null;
    }

    function renderDetailTables() {
      const container = document.getElementById("detailSections");
      const mode = document.getElementById("deltaMode").value;
      const selected = getSelectedModels();
      const selectedTable = document.getElementById("tableSelect").value;
      const tables = getCategoryTables();
      container.innerHTML = "";
      tables.forEach((table) => {
        if (selectedTable !== "all" && selectedTable !== table.key) {
          return;
        }
        const section = document.createElement("div");
        section.className = "section";
        section.id = `section-${table.key}`;

        const heading = document.createElement("h2");
        heading.textContent = table.title;
        section.appendChild(heading);

        if (table.missing && table.missing.length) {
          const note = document.createElement("div");
          note.className = "note";
          note.textContent = `Missing data for conditions: ${table.missing.join(", ")}. Showing available results.`;
          section.appendChild(note);
        }

        const controls = document.createElement("div");
        controls.className = "chart-controls";
        controls.dataset.tableKey = table.key;

        const state = barState[table.key] || {
          metric: table.metrics[0] || "",
          condition: "AA"
        };
        if (!table.metrics.includes(state.metric)) {
          state.metric = table.metrics[0] || "";
        }
        barState[table.key] = state;

        const metricLabel = document.createElement("label");
        metricLabel.textContent = "Metric";
        const metricSelect = document.createElement("select");
        metricSelect.id = `bar-metric-${table.key}`;
          table.metrics.forEach((metric) => {
            const option = document.createElement("option");
            option.value = metric;
            option.textContent = getMetricDisplayLabel(metric, table);
            metricSelect.appendChild(option);
          });
        metricSelect.value = state.metric;
        metricLabel.appendChild(metricSelect);
        controls.appendChild(metricLabel);

        const conditionLabel = document.createElement("label");
        conditionLabel.textContent = "Condition";
        const conditionSelect = document.createElement("select");
        conditionSelect.id = `bar-condition-${table.key}`;
        ["OA", "AO", "AA"].forEach((condition) => {
          const option = document.createElement("option");
          option.value = condition;
          option.textContent = `${condition}-OO`;
          conditionSelect.appendChild(option);
        });
        conditionSelect.value = state.condition;
        conditionLabel.appendChild(conditionSelect);
        controls.appendChild(conditionLabel);

        section.appendChild(controls);

        const chartCard = document.createElement("div");
        chartCard.className = "chart-card";
        const chartTitle = document.createElement("div");
        chartTitle.className = "chart-title";
        chartTitle.textContent = "Category Delta Bars";
        chartCard.appendChild(chartTitle);
        const chartContainer = document.createElement("div");
        chartContainer.id = `bar-container-${table.key}`;
        chartCard.appendChild(chartContainer);
        section.appendChild(chartCard);

        const wrap = document.createElement("div");
        wrap.className = "table-wrap";
        const tableEl = document.createElement("table");
        tableEl.dataset.tableKey = table.key;

        const thead = document.createElement("thead");
        const headerRow = document.createElement("tr");
        const modelTh = document.createElement("th");
        modelTh.textContent = "Model";
        modelTh.classList.add("sortable");
        modelTh.dataset.sortKey = "model";
        headerRow.appendChild(modelTh);
          table.metrics.forEach((metric) => {
            const displayLabel = getMetricDisplayLabel(metric, table);
            const metricLower = displayLabel.toLowerCase();
            if (
              isExcludeWebSearch() &&
              table.title.toLowerCase().includes("agentic") &&
              metricLower.includes("web search")
            ) {
              return;
            }
            const isOverall = displayLabel.toLowerCase().includes("overall");
            conditions.forEach((condition) => {
              const th = document.createElement("th");
              th.classList.add("sortable");
              th.dataset.sortKey = `${metric}::${condition}`;
              th.textContent = `${displayLabel} ${condition}`;
              if (isOverall) {
                th.classList.add("overall-header");
              }
              headerRow.appendChild(th);
            });
        });
        thead.appendChild(headerRow);
        tableEl.appendChild(thead);

        const tbody = document.createElement("tbody");
        const tableKey = table.key;
        const sortedRows = getSortedRows(tableKey, table.rows);
        sortedRows.forEach((row) => {
          if (!selected.has(row.model)) {
            return;
          }
          const tr = document.createElement("tr");
          const modelTd = document.createElement("td");
          modelTd.textContent = row.model ?? MISSING;
          tr.appendChild(modelTd);
            table.metrics.forEach((metric) => {
              const displayLabel = getMetricDisplayLabel(metric, table);
              const metricLower = displayLabel.toLowerCase();
              if (
                isExcludeWebSearch() &&
                table.title.toLowerCase().includes("agentic") &&
                metricLower.includes("web search")
              ) {
                return;
              }
              const bestAcc = Math.max(
                ...conditions
                  .map((condition) => getMetricDisplayValue(row, metric, table, condition))
                  .filter((value) => isNumber(value))
              );
              conditions.forEach((condition) => {
                const value = getMetricDisplayValue(row, metric, table, condition);
                const td = document.createElement("td");
                const baseline = getMetricDisplayValue(row, metric, table, "OO");
                const accText = toFixed(value, 2);
                if (condition === "OO") {
                  td.textContent = accText;
                  td.classList.add("baseline");
              } else {
                const deltaText = formatDelta(value, baseline, mode);
                td.textContent = accText + " (" + deltaText + ")";
              }
              if (isNumber(value) && isNumber(bestAcc) && value === bestAcc) {
                td.classList.add("best");
              }
              tr.appendChild(td);
            });
          });
          tbody.appendChild(tr);
        });
        tableEl.appendChild(tbody);
        wrap.appendChild(tableEl);
        section.appendChild(wrap);
        container.appendChild(section);
        updateSortIndicators(tableEl, table.key);
      });
    }

    function renderAllTables() {
      const selectedTable = document.getElementById("tableSelect").value;
      const mainSection = document.querySelector(".table-wrap");
      const note = document.getElementById("note");
      if (selectedTable === "main" || selectedTable === "all") {
        mainSection.style.display = "";
        note.style.display = "";
        renderMainTable();
        const mainTable = document.querySelector("table[data-table-key='main']");
        if (mainTable) {
          updateSortIndicators(mainTable, "main");
        }
      } else {
        mainSection.style.display = "none";
        note.style.display = "none";
      }
      renderDetailTables();
      updatePlot();
      updateHeatmaps();
      updateContribution();
      updateErrorPlots();
      updateOverallLabel();
    }

    function bindControls() {
      document.getElementById("deltaMode").addEventListener("change", () => {
        renderAllTables();
        attachHeaderSorting();
        renderBarCharts();
        updatePlot();
        updateErrorPlots();
      });
      document.getElementById("detailMode").addEventListener("change", () => {
        buildTableSelect();
        buildPlotCategoryFilter();
        renderAllTables();
        attachHeaderSorting();
        renderBarCharts();
        updatePlot();
        updateErrorPlots();
      });
      document.getElementById("tableSelect").addEventListener("change", (event) => {
        buildPlotCategoryFilter();
        renderAllTables();
        attachHeaderSorting();
        renderBarCharts();
        updatePlot();
        updateErrorPlots();
      });
      document.getElementById("modelFilter").addEventListener("change", () => {
        renderAllTables();
        attachHeaderSorting();
        renderBarCharts();
        updatePlot();
        updateErrorPlots();
      });
      document.getElementById("selectAllModels").addEventListener("click", () => {
        const select = document.getElementById("modelFilter");
        Array.from(select.options).forEach((option) => {
          option.selected = true;
        });
        renderAllTables();
        attachHeaderSorting();
        renderBarCharts();
        updatePlot();
        updateErrorPlots();
      });
      document.getElementById("clearModels").addEventListener("click", () => {
        const select = document.getElementById("modelFilter");
        Array.from(select.options).forEach((option) => {
          option.selected = false;
        });
        renderAllTables();
        attachHeaderSorting();
        renderBarCharts();
        updatePlot();
        updateErrorPlots();
      });
      document.getElementById("plotMetricMode").addEventListener("change", () => {
        updatePlot();
        updateErrorPlots();
      });
      document.getElementById("plotCategoryFilter").addEventListener("change", () => {
        updatePlot();
        updateErrorPlots();
      });
      document.getElementById("excludeWebSearch").addEventListener("change", () => {
        renderAllTables();
        attachHeaderSorting();
        renderBarCharts();
        updatePlot();
        updateHeatmaps();
        updateErrorPlots();
      });
      document.getElementById("heatmapCombo").addEventListener("change", () => {
        updateHeatmaps();
        updateErrorPlots();
      });
      document.querySelectorAll(".plot-combo").forEach((el) => {
        el.addEventListener("change", () => {
          updatePlot();
          updateErrorPlots();
        });
      });
      document.getElementById("plotTabScatter").addEventListener("click", () => {
        setPlotView("scatter");
      });
      document.getElementById("plotTabHeatmap").addEventListener("click", () => {
        setPlotView("heatmap");
      });
      document.getElementById("plotTabContribution").addEventListener("click", () => {
        setPlotView("contrib");
      });
      document.getElementById("plotTabErrors").addEventListener("click", () => {
        setPlotView("errors");
      });
      document.getElementById("tabResults").addEventListener("click", () => {
        setActiveTab("results");
      });
      document.getElementById("tabPlots").addEventListener("click", () => {
        setActiveTab("plots");
      });
      document.getElementById("errorMixMode").addEventListener("change", () => {
        updateErrorMix();
      });
      document.getElementById("errorHeatmapCombo").addEventListener("change", () => {
        updateErrorHeatmap();
      });
      document.getElementById("errorBucketMode").addEventListener("change", () => {
        updateErrorBuckets();
      });
      document.getElementById("errorTabMix").addEventListener("click", () => {
        setErrorView("mix");
      });
      document.getElementById("errorTabHeatmap").addEventListener("click", () => {
        setErrorView("heatmap");
      });
      document.getElementById("errorTabBuckets").addEventListener("click", () => {
        setErrorView("buckets");
      });
    }

    function updateSortIndicators(tableElement, tableKey) {
      const state = tableState[tableKey] || { sortKey: null, sortDir: null };
      tableElement.querySelectorAll("th.sortable").forEach((th) => {
        const indicator = th.querySelector(".sort-indicator");
        if (indicator) {
          indicator.remove();
        }
        if (state.sortKey && th.dataset.sortKey === state.sortKey) {
          const span = document.createElement("span");
          span.className = "sort-indicator";
          span.textContent = state.sortDir === "asc" ? "▲" : "▼";
          th.appendChild(span);
        }
      });
    }

    function attachHeaderSorting() {
      document.querySelectorAll("table").forEach((table) => {
        table.querySelectorAll("th.sortable").forEach((th) => {
          if (th.dataset.bound === "1") {
            return;
          }
          th.dataset.bound = "1";
          th.addEventListener("click", () => {
            const tableKey = table.dataset.tableKey || "main";
            const key = th.dataset.sortKey;
            const state = tableState[tableKey] || { sortKey: null, sortDir: null };
            if (state.sortKey !== key) {
              state.sortKey = key;
              state.sortDir = "asc";
            } else if (state.sortDir === "asc") {
              state.sortDir = "desc";
            } else {
              state.sortKey = null;
              state.sortDir = null;
            }
            tableState[tableKey] = state;
            renderAllTables();
            attachHeaderSorting();
          });
        });
      });
    }

    function renderMainHeader() {
      const headerRow = document.querySelector("table thead tr");
      if (!headerRow) {
        return;
      }
      headerRow.querySelectorAll("th").forEach((th, index) => {
        if (index === 0) {
          th.classList.add("sortable");
          th.dataset.sortKey = "model";
        } else {
          const condition = conditions[index - 1];
          th.classList.add("sortable");
          th.dataset.sortKey = condition;
        }
      });
    }

    function renderAllTablesWithHeaders() {
      renderMainHeader();
      renderAllTables();
      attachHeaderSorting();
      renderBarCharts();
      updatePlot();
      updateHeatmaps();
      updateContribution();
      updateErrorPlots();
    }

    function getCategoryTables() {
      const mode = document.getElementById("detailMode").value;
      return mode === "summary" ? categoryTablesSummary : categoryTablesFull;
    }

    function getCategoryIndex() {
      const mode = document.getElementById("detailMode").value;
      return mode === "summary" ? tableIndexSummary : tableIndexFull;
    }

    function normalizeAcc(value) {
      if (!isNumber(value)) {
        return null;
      }
      return value > 1.5 ? value / 100 : value;
    }

    function getOverallComponents(model, condition) {
      if (!overallComponents || !overallComponents[condition]) {
        return null;
      }
      return overallComponents[condition][model] || null;
    }

    const ERROR_TYPES_ORDER = [
      "WRONG_TOOL",
      "HALLUCINATED_TOOL",
      "SHOULD_ABSTAIN_BUT_CALLED",
      "SHOULD_CALL_BUT_ABSTAINED",
      "MISSING_REQUIRED_ARGS",
      "EXTRA_ARGS",
      "TYPE_MISMATCH",
      "VALUE_FORMAT_ERROR",
      "WRONG_ARGS",
      "INVALID_JSON_OR_SCHEMA",
      "OTHER"
    ];

    const ROOT_CAUSE_MAP = {
      WRONG_TOOL: "TOOL_DOC_UNDERSTANDING",
      HALLUCINATED_TOOL: "TOOL_DOC_UNDERSTANDING",
      MISSING_REQUIRED_ARGS: "TOOL_DOC_UNDERSTANDING",
      EXTRA_ARGS: "TOOL_DOC_UNDERSTANDING",
      TYPE_MISMATCH: "TOOL_DOC_UNDERSTANDING",
      VALUE_FORMAT_ERROR: "TOOL_DOC_UNDERSTANDING",
      WRONG_ARGS: "TOOL_DOC_UNDERSTANDING",
      SHOULD_ABSTAIN_BUT_CALLED: "USER_INTENT_UNDERSTANDING",
      SHOULD_CALL_BUT_ABSTAINED: "USER_INTENT_UNDERSTANDING",
      INVALID_JSON_OR_SCHEMA: "OTHER",
      OTHER: "OTHER"
    };

    const ROOT_CAUSE_ORDER = [
      "TOOL_DOC_UNDERSTANDING",
      "USER_INTENT_UNDERSTANDING",
      "STATE_ENV_UNDERSTANDING",
      "OTHER"
    ];

    function buildErrorIndex() {
      const index = {};
      (errorRecords || []).forEach((rec) => {
        const condition = rec.condition;
        const model = rec.model;
        const testCategory = rec.test_category;
        if (!index[condition]) {
          index[condition] = {};
        }
        if (!index[condition][model]) {
          index[condition][model] = {};
        }
        index[condition][model][testCategory] = rec;
      });
      return index;
    }

    const errorIndex = buildErrorIndex();

    function isWebSearchCategory(testCategory) {
      return String(testCategory || "").startsWith("web_search");
    }

    function getSelectedTestCategories() {
      const selectedTable = document.getElementById("tableSelect").value;
      const tables = getCategoryTables();
      const selected = new Set();
      tables.forEach((table) => {
        if (selectedTable !== "all" && selectedTable !== table.key) {
          return;
        }
        const groups = errorGroups[table.key] || {};
        Object.values(groups).forEach((group) => {
          group.forEach((testCategory) => selected.add(testCategory));
        });
      });
      let list = Array.from(selected);
      if (isExcludeWebSearch()) {
        list = list.filter((testCategory) => !isWebSearchCategory(testCategory));
      }
      return list;
    }

    function aggregateErrorsForCategories(model, condition, testCategories) {
      let total = 0;
      let incorrect = 0;
      const errorCounts = {};
      testCategories.forEach((testCategory) => {
        const byCondition = errorIndex && errorIndex[condition];
        const byModel = byCondition && byCondition[model];
        const rec = byModel && byModel[testCategory] ? byModel[testCategory] : null;
        if (!rec) {
          return;
        }
        total += rec.total || 0;
        incorrect += rec.incorrect || 0;
        const errors = rec.errors || {};
        Object.keys(errors).forEach((key) => {
          errorCounts[key] = (errorCounts[key] || 0) + errors[key];
        });
      });
      return { total, incorrect, errorCounts };
    }

    function setErrorView(viewId) {
      const mixView = document.getElementById("error_mix_view");
      const heatmapView = document.getElementById("error_heatmap_view");
      const bucketView = document.getElementById("error_bucket_view");
      const tabMix = document.getElementById("errorTabMix");
      const tabHeatmap = document.getElementById("errorTabHeatmap");
      const tabBuckets = document.getElementById("errorTabBuckets");
      if (!mixView || !heatmapView || !bucketView || !tabMix || !tabHeatmap || !tabBuckets) {
        return;
      }
      const showMix = viewId === "mix";
      const showHeatmap = viewId === "heatmap";
      const showBuckets = viewId === "buckets";
      mixView.classList.toggle("active", showMix);
      heatmapView.classList.toggle("active", showHeatmap);
      bucketView.classList.toggle("active", showBuckets);
      tabMix.classList.toggle("active", showMix);
      tabHeatmap.classList.toggle("active", showHeatmap);
      tabBuckets.classList.toggle("active", showBuckets);
      updateErrorPlots();
    }

    function updatePlot() {
      const plot = document.getElementById("plot_scatter");
      const warning = document.getElementById("plotWarning");
      if (!plot || !warning || typeof Plotly === "undefined") {
        return;
      }
      const scatterView = document.getElementById("plots_scatter_view");
      if (scatterView && !scatterView.classList.contains("active")) {
        return;
      }
      const selectedModels = Array.from(getSelectedModels());
      plot.innerHTML = "";
      if (selectedModels.length === 0) {
        warning.style.display = "";
        warning.textContent = "Select at least one model to view the scatter plot.";
        return;
      }
      const selectedTable = document.getElementById("tableSelect").value;
      const tables = getCategoryTables();
      const metricMode = document.getElementById("plotMetricMode").value;
      const categoryFilter = document.getElementById("plotCategoryFilter").value;
      const enabledCombos = new Set(
        Array.from(document.querySelectorAll(".plot-combo:checked")).map((el) => el.value)
      );
      if (enabledCombos.size === 0) {
        warning.style.display = "";
        warning.textContent = "Select at least one combo to view the scatter plot.";
        return;
      }
      warning.style.display = "none";
      selectedModels.forEach((model) => {
        const points = { OA: [], AO: [], AA: [] };
        tables.forEach((table) => {
          if (selectedTable !== "all" && selectedTable !== table.key) {
            return;
          }
          if (categoryFilter !== "all" && categoryFilter !== table.key) {
            return;
          }
          table.rows.forEach((row) => {
            if (row.model !== model) {
              return;
            }
            table.metrics.forEach((metric) => {
              const metricLabel = getMetricDisplayLabel(metric, table);
              const oo = normalizeAcc(getMetricDisplayValue(row, metric, table, "OO"));
              if (!isNumber(oo)) {
                return;
              }
              ["OA", "AO", "AA"].forEach((condition) => {
                if (!enabledCombos.has(condition)) {
                  return;
                }
                const combo = normalizeAcc(getMetricDisplayValue(row, metric, table, condition));
                if (!isNumber(combo)) {
                  return;
                }
                const delta = combo - oo;
                const y = metricMode === "delta" ? delta : combo;
                points[condition].push({
                  x: oo,
                  y,
                  meta: {
                    condition,
                    category: table.title,
                    label: metricLabel,
                    oo,
                    combo,
                    delta
                  }
                });
              });
            });
          });
        });

        const totalPoints = Object.values(points).reduce((sum, arr) => sum + arr.length, 0);
        if (!totalPoints) {
          return;
        }

        const container = document.createElement("div");
        container.className = "section";
        const heading = document.createElement("h2");
        heading.textContent = model;
        container.appendChild(heading);
        const plotDiv = document.createElement("div");
        plotDiv.style.height = "420px";
        container.appendChild(plotDiv);
        plot.appendChild(container);

        const traces = ["OA", "AO", "AA"]
          .filter((condition) => enabledCombos.has(condition))
          .map((condition) => {
            const tracePoints = points[condition];
            return {
              name: condition,
              mode: "markers",
              type: "scatter",
              x: tracePoints.map((pt) => pt.x),
              y: tracePoints.map((pt) => pt.y),
              marker: { size: 10 },
              customdata: tracePoints.map((pt) => pt.meta),
              hovertemplate:
                "Combo: %{customdata.condition}<br>" +
                "Category: %{customdata.category}<br>" +
                "Row: %{customdata.label}<br>" +
                "OO: %{customdata.oo:.3f}<br>" +
                "Combo: %{customdata.combo:.3f}<br>" +
                "Delta: %{customdata.delta:.3f}<extra></extra>"
            };
          });

        const accuracyLayout = {
          xaxis: { title: "OO accuracy", range: [0, 1] },
          yaxis: { title: "Combo accuracy", range: [0, 1] },
          shapes: [
            {
              type: "line",
              x0: 0,
              y0: 0,
              x1: 1,
              y1: 1,
              line: { color: "#8892b0", width: 1, dash: "dot" }
            }
          ]
        };
        const deltaLayout = {
          xaxis: { title: "OO accuracy", range: [0, 1] },
          yaxis: { title: "Combo - OO", range: [-1, 1] },
          shapes: [
            {
              type: "line",
              x0: 0,
              y0: 0,
              x1: 1,
              y1: 0,
              line: { color: "#8892b0", width: 1, dash: "dot" }
            }
          ]
        };

        const layout = {
          margin: { t: 20, l: 40, r: 20, b: 40 },
          legend: { orientation: "h" },
          ...(metricMode === "delta" ? deltaLayout : accuracyLayout)
        };
        Plotly.newPlot(plotDiv, traces, layout, { displayModeBar: false });
      });
    }

    function updateContribution() {
      const container = document.getElementById("plot_contrib");
      const warning = document.getElementById("contribWarning");
      if (!container || !warning || typeof Plotly === "undefined") {
        return;
      }
      const contribView = document.getElementById("plots_contrib_view");
      if (contribView && !contribView.classList.contains("active")) {
        return;
      }
      const selectedModels = Array.from(getSelectedModels());
      container.innerHTML = "";
      if (selectedModels.length === 0) {
        warning.style.display = "";
        warning.textContent =
          "Select at least one model to view contribution breakdown.";
        return;
      }
      warning.style.display = "none";

      const useMemoryOnly = isExcludeWebSearch();
      const modeLabel = useMemoryOnly
        ? "overall excludes web_search"
        : "overall includes web_search";
      const components = [
        { key: "non_live", label: "Non-live", weight: 0.1 },
        { key: "live", label: "Live", weight: 0.1 },
        { key: "irrelevance", label: "Irrelevance", weight: 0.1 },
        { key: "multi_turn", label: "Multi-turn", weight: 0.3 },
        {
          key: useMemoryOnly ? "memory" : "agentic",
          label: useMemoryOnly ? "Agentic (memory-only)" : "Agentic",
          weight: 0.4
        }
      ];

      selectedModels.forEach((model) => {
        const oo = getOverallComponents(model, "OO");
        if (!oo) {
          return;
        }
        const combos = ["OA", "AO", "AA"];
        const traces = components.map((component) => {
          const y = [];
          const custom = [];
          combos.forEach((combo) => {
            const comboComp = getOverallComponents(model, combo);
            const ooVal = normalizeAcc(oo[component.key]);
            const comboVal = normalizeAcc(comboComp ? comboComp[component.key] : null);
            let delta = null;
            let contrib = null;
            if (isNumber(ooVal) && isNumber(comboVal)) {
              delta = comboVal - ooVal;
              contrib = delta * component.weight;
            }
            y.push(contrib);
            custom.push({
              component: component.label,
              weight: component.weight,
              oo: ooVal,
              combo: comboVal,
              delta,
              contrib,
              modeLabel
            });
          });
          return {
            name: component.label,
            type: "bar",
            x: combos,
            y,
            customdata: custom,
            hovertemplate:
              "Component: %{customdata.component}<br>" +
              "Weight: %{customdata.weight:.2f}<br>" +
              "OO: %{customdata.oo:.3f}<br>" +
              "Combo: %{customdata.combo:.3f}<br>" +
              "Delta: %{customdata.delta:.3f}<br>" +
              "Contribution: %{customdata.contrib:.3f}<br>" +
              "%{customdata.modeLabel}<extra></extra>"
          };
        });

        const section = document.createElement("div");
        section.className = "section";
        const heading = document.createElement("h2");
        heading.textContent = model;
        section.appendChild(heading);
        const plotDiv = document.createElement("div");
        plotDiv.style.height = "420px";
        section.appendChild(plotDiv);
        container.appendChild(section);

        const layout = {
          barmode: "relative",
          margin: { t: 20, l: 50, r: 20, b: 40 },
          shapes: [
            {
              type: "line",
              x0: -0.5,
              x1: 2.5,
              y0: 0,
              y1: 0,
              line: { color: "#8892b0", width: 1, dash: "dot" }
            }
          ],
          yaxis: { title: "Contribution (pp)" },
          xaxis: { title: "Combo" }
        };
        Plotly.newPlot(plotDiv, traces, layout, { displayModeBar: false });
      });
    }

    function updateErrorPlots() {
      const errorsView = document.getElementById("plots_errors_view");
      if (errorsView && !errorsView.classList.contains("active")) {
        return;
      }
      const mixView = document.getElementById("error_mix_view");
      const heatmapView = document.getElementById("error_heatmap_view");
      const bucketView = document.getElementById("error_bucket_view");
      if (mixView && mixView.classList.contains("active")) {
        updateErrorMix();
      }
      if (heatmapView && heatmapView.classList.contains("active")) {
        updateErrorHeatmap();
      }
      if (bucketView && bucketView.classList.contains("active")) {
        updateErrorBuckets();
      }
    }

    function updateErrorMix() {
      const container = document.getElementById("error_mix_plot");
      const warning = document.getElementById("errorMixWarning");
      if (!container || !warning || typeof Plotly === "undefined") {
        return;
      }
      const selectedModels = Array.from(getSelectedModels());
      container.innerHTML = "";
      if (selectedModels.length === 0) {
        warning.style.display = "";
        warning.textContent = "Select at least one model to view error mix.";
        return;
      }
      warning.style.display = "none";
      const testCategories = getSelectedTestCategories();
      if (!testCategories.length) {
        warning.style.display = "";
        warning.textContent = "No error data for the current selection.";
        return;
      }
      const mode = document.getElementById("errorMixMode").value;

      selectedModels.forEach((model) => {
        const traces = ERROR_TYPES_ORDER.map((errorType) => {
          const y = [];
          const custom = [];
          ["OO", "OA", "AO", "AA"].forEach((condition) => {
            const agg = aggregateErrorsForCategories(model, condition, testCategories);
            const count = agg.errorCounts[errorType] || 0;
            const share = agg.incorrect ? count / agg.incorrect : 0;
            y.push(mode === "share" ? share : count);
            custom.push({
              errorType,
              count,
              share,
              incorrect: agg.incorrect
            });
          });
          return {
            name: errorType,
            type: "bar",
            x: ["OO", "OA", "AO", "AA"],
            y,
            customdata: custom,
            hovertemplate:
              "Error: %{customdata.errorType}<br>" +
              "Count: %{customdata.count}<br>" +
              "Share: %{customdata.share:.2%}<br>" +
              "Total incorrect: %{customdata.incorrect}<extra></extra>"
          };
        });

        const section = document.createElement("div");
        section.className = "section";
        const heading = document.createElement("h2");
        heading.textContent = model;
        section.appendChild(heading);
        const plotDiv = document.createElement("div");
        plotDiv.style.height = "420px";
        section.appendChild(plotDiv);
        container.appendChild(section);

        const layout = {
          barmode: "stack",
          margin: { t: 20, l: 60, r: 20, b: 40 },
          yaxis: {
            title: mode === "share" ? "Share of incorrect" : "Incorrect count",
            tickformat: mode === "share" ? ".0%" : undefined
          }
        };
        Plotly.newPlot(plotDiv, traces, layout, { displayModeBar: false });
      });
    }

    function updateErrorHeatmap() {
      const container = document.getElementById("error_heatmap_plot");
      const warning = document.getElementById("errorHeatmapWarning");
      if (!container || !warning || typeof Plotly === "undefined") {
        return;
      }
      const selectedModels = Array.from(getSelectedModels());
      container.innerHTML = "";
      if (selectedModels.length === 0) {
        warning.style.display = "";
        warning.textContent = "Select at least one model to view the error heatmap.";
        return;
      }
      warning.style.display = "none";
      const selectedCombo = document.getElementById("errorHeatmapCombo").value;
      const tables = getCategoryTables();
      const selectedTable = document.getElementById("tableSelect").value;

      selectedModels.forEach((model) => {
        const rows = [];
        let maxAbs = 0;
        tables.forEach((table) => {
          if (selectedTable !== "all" && selectedTable !== table.key) {
            return;
          }
          const groups = errorGroups[table.key] || {};
          table.metrics.forEach((metric) => {
            const label = getMetricDisplayLabel(metric, table);
            const categories = groups[metric] || groups[label] || [];
            const filtered = isExcludeWebSearch()
              ? categories.filter((cat) => !isWebSearchCategory(cat))
              : categories;
            if (!filtered.length) {
              return;
            }
            const oo = aggregateErrorsForCategories(model, "OO", filtered);
            const combo = aggregateErrorsForCategories(model, selectedCombo, filtered);
            if (!oo.total) {
              return;
            }
            const row = {
              label,
              category: table.title,
              values: {}
            };
            ERROR_TYPES_ORDER.forEach((errorType) => {
              const ooRate = oo.total ? (oo.errorCounts[errorType] || 0) / oo.total : 0;
              const comboRate = combo.total
                ? (combo.errorCounts[errorType] || 0) / combo.total
                : 0;
              const delta = comboRate - ooRate;
              row.values[errorType] = {
                ooRate,
                comboRate,
                delta,
                total: oo.total
              };
              maxAbs = Math.max(maxAbs, Math.abs(delta));
            });
            rows.push(row);
          });
        });

        if (!rows.length) {
          return;
        }
        if (!maxAbs) {
          maxAbs = 0.01;
        }
        const xLabels = ERROR_TYPES_ORDER.slice();
        const yLabels = rows.map((row) => row.label);
        const z = rows.map((row) =>
          xLabels.map((errorType) => row.values[errorType].delta)
        );
        const custom = rows.map((row) =>
          xLabels.map((errorType) => ({
            label: row.label,
            category: row.category,
            errorType,
            ooRate: row.values[errorType].ooRate,
            comboRate: row.values[errorType].comboRate,
            delta: row.values[errorType].delta,
            total: row.values[errorType].total
          }))
        );

        const section = document.createElement("div");
        section.className = "section";
        const heading = document.createElement("h2");
        heading.textContent = model;
        section.appendChild(heading);
        const plotDiv = document.createElement("div");
        plotDiv.style.height = "520px";
        section.appendChild(plotDiv);
        container.appendChild(section);

        const trace = {
          type: "heatmap",
          z,
          x: xLabels,
          y: yLabels,
          zmid: 0,
          zmin: -maxAbs,
          zmax: maxAbs,
          customdata: custom,
          hovertemplate:
            "Row: %{customdata.label}<br>" +
            "Category: %{customdata.category}<br>" +
            "Error: %{customdata.errorType}<br>" +
            "OO rate: %{customdata.ooRate:.2%}<br>" +
            "Combo rate: %{customdata.comboRate:.2%}<br>" +
            "Delta: %{customdata.delta:.2%}<br>" +
            "N: %{customdata.total}<extra></extra>"
        };
        const layout = {
          margin: { t: 20, l: 120, r: 20, b: 120 },
          xaxis: { tickangle: -30 },
          yaxis: { automargin: true }
        };
        Plotly.newPlot(plotDiv, [trace], layout, { displayModeBar: false });
      });
      if (!container.childNodes.length) {
        warning.style.display = "";
        warning.textContent = "No error data for the current selection.";
      }
    }

    function updateErrorBuckets() {
      const container = document.getElementById("error_bucket_plot");
      const warning = document.getElementById("errorBucketWarning");
      if (!container || !warning || typeof Plotly === "undefined") {
        return;
      }
      const selectedModels = Array.from(getSelectedModels());
      container.innerHTML = "";
      if (selectedModels.length === 0) {
        warning.style.display = "";
        warning.textContent = "Select at least one model to view BFCL buckets.";
        return;
      }
      warning.style.display = "none";
      const testCategories = getSelectedTestCategories();
      if (!testCategories.length) {
        warning.style.display = "";
        warning.textContent = "No error data for the current selection.";
        return;
      }
      const mode = document.getElementById("errorBucketMode").value;

      selectedModels.forEach((model) => {
        const traces = ROOT_CAUSE_ORDER.map((bucket) => {
          const y = [];
          const custom = [];
          ["OO", "OA", "AO", "AA"].forEach((condition) => {
            const agg = aggregateErrorsForCategories(model, condition, testCategories);
            let bucketCount = 0;
            Object.entries(agg.errorCounts).forEach(([errorType, count]) => {
              const mapped = ROOT_CAUSE_MAP[errorType] || "OTHER";
              if (mapped === bucket) {
                bucketCount += count;
              }
            });
            const share = agg.incorrect ? bucketCount / agg.incorrect : 0;
            const rate = agg.total ? bucketCount / agg.total : 0;
            y.push(mode === "share" ? share : rate);
            custom.push({
              bucket,
              count: bucketCount,
              share,
              rate,
              incorrect: agg.incorrect,
              total: agg.total
            });
          });
          return {
            name: bucket,
            type: "bar",
            x: ["OO", "OA", "AO", "AA"],
            y,
            customdata: custom,
            hovertemplate:
              "Bucket: %{customdata.bucket}<br>" +
              "Count: %{customdata.count}<br>" +
              "Share: %{customdata.share:.2%}<br>" +
              "Rate: %{customdata.rate:.2%}<br>" +
              "Total incorrect: %{customdata.incorrect}<br>" +
              "Total examples: %{customdata.total}<extra></extra>"
          };
        });

        const section = document.createElement("div");
        section.className = "section";
        const heading = document.createElement("h2");
        heading.textContent = model;
        section.appendChild(heading);
        const plotDiv = document.createElement("div");
        plotDiv.style.height = "420px";
        section.appendChild(plotDiv);
        container.appendChild(section);

        const layout = {
          barmode: "stack",
          margin: { t: 20, l: 60, r: 20, b: 40 },
          yaxis: {
            title: mode === "share" ? "Share of incorrect" : "Error rate",
            tickformat: ".0%"
          }
        };
        Plotly.newPlot(plotDiv, traces, layout, { displayModeBar: false });
      });
    }

    function updateHeatmaps() {
      const stack = document.getElementById("heatmap_stack");
      const warning = document.getElementById("heatmapWarning");
      if (!stack || !warning || typeof Plotly === "undefined") {
        return;
      }
      const heatmapView = document.getElementById("plots_heatmap_view");
      if (heatmapView && !heatmapView.classList.contains("active")) {
        return;
      }
      const selectedTable = document.getElementById("tableSelect").value;
      const tables = getCategoryTables();
      const selectedCombo = document.getElementById("heatmapCombo").value;
      const selectedModels = Array.from(getSelectedModels());
      const tableList = tables.filter((table) => {
        if (selectedTable === "main") {
          return false;
        }
        if (selectedTable !== "all" && selectedTable !== table.key) {
          return false;
        }
        if (isExcludeWebSearch() && table.title.toLowerCase().includes("web search")) {
          return false;
        }
        return true;
      });

      stack.innerHTML = "";
      warning.style.display = "none";
      warning.textContent = "";
      if (!tableList.length) {
        warning.style.display = "";
        warning.textContent = "No categories selected for the heatmap.";
        return;
      }

      const modelSet = new Set(selectedModels);
      let maxAbs = 0;
      const specs = [];

      tableList.forEach((table) => {
        const rowIndex = {};
        table.rows.forEach((row) => {
          rowIndex[row.model] = row;
        });
        const yLabels = selectedModels.filter((model) => modelSet.has(model));
        const metrics = table.metrics.map((metric) => getMetricDisplayLabel(metric, table));
        const isAgentic = table.title.toLowerCase().includes("agentic");

        const slices = isAgentic
          ? [
              {
                key: "web_search",
                title: "Agentic (Web Search)",
                filter: (label) => label.toLowerCase().includes("web search")
              },
              {
                key: "memory",
                title: "Agentic (Memory)",
                filter: (label) => {
                  const lower = label.toLowerCase();
                  return (
                    lower.includes("memory") &&
                    !lower.includes("agentic overall") &&
                    !lower.includes("agentic (memory-only)")
                  );
                }
              }
            ]
          : [
              {
                key: "default",
                title: table.title,
                filter: () => true
              }
            ];

        slices.forEach((slice) => {
          if (isExcludeWebSearch() && slice.key === "web_search") {
            return;
          }
          const metricIndexes = metrics
            .map((label, idx) => (slice.filter(label) ? idx : -1))
            .filter((idx) => idx >= 0);
          if (!metricIndexes.length) {
            return;
          }
          const xLabels = metricIndexes.map((idx) => metrics[idx]);
          const z = [];
          const custom = [];

          yLabels.forEach((model) => {
            const row = rowIndex[model];
            const rowZ = [];
            const rowCustom = [];
            metricIndexes.forEach((metricIdx) => {
              const metricKey = table.metrics[metricIdx];
              const metricLabel = metrics[metricIdx];
              const oo = normalizeAcc(
                row ? getMetricDisplayValue(row, metricKey, table, "OO") : null
              );
              const combo = normalizeAcc(
                row ? getMetricDisplayValue(row, metricKey, table, selectedCombo) : null
              );
              let delta = null;
              if (isNumber(oo) && isNumber(combo)) {
                delta = combo - oo;
                maxAbs = Math.max(maxAbs, Math.abs(delta));
              }
              rowZ.push(delta);
              rowCustom.push({
                model,
                category: slice.title,
                label: metricLabel,
                oo,
                combo,
                delta,
                n: "not available"
              });
            });
            z.push(rowZ);
            custom.push(rowCustom);
          });

          specs.push({
            title: slice.title,
            xLabels,
            yLabels,
            z,
            custom
          });
        });
      });

      if (!isNumber(maxAbs) || maxAbs === 0) {
        maxAbs = 0.05;
      }

      specs.forEach((spec, index) => {
        const section = document.createElement("div");
        section.className = "section";
        const heading = document.createElement("h2");
        heading.textContent = spec.title;
        section.appendChild(heading);
        const container = document.createElement("div");
        container.id = `heatmap-${index}`;
        section.appendChild(container);
        stack.appendChild(section);

        const trace = {
          type: "heatmap",
          z: spec.z,
          x: spec.xLabels,
          y: spec.yLabels,
          zmid: 0,
          zmin: -maxAbs,
          zmax: maxAbs,
          customdata: spec.custom,
          hovertemplate:
            "Model: %{customdata.model}<br>" +
            "Category: %{customdata.category}<br>" +
            "Row: %{customdata.label}<br>" +
            "OO: %{customdata.oo:.3f}<br>" +
            "Combo: %{customdata.combo:.3f}<br>" +
            "Delta: %{customdata.delta:.3f}<br>" +
            "n: %{customdata.n}<extra></extra>"
        };
        const layout = {
          margin: { t: 10, l: 80, r: 20, b: 120 },
          xaxis: {
            tickangle: -30
          },
          yaxis: {
            automargin: true
          }
        };
        Plotly.newPlot(container, [trace], layout, { displayModeBar: false });
      });
    }

    function renderBarCharts() {
      const tables = getCategoryTables();
      const selectedTable = document.getElementById("tableSelect").value;
      tables.forEach((table) => {
        if (selectedTable !== "all" && selectedTable !== table.key) {
          return;
        }
        renderBarChart(table);
      });
      attachBarControlHandlers();
    }

    function renderBarChart(table) {
      const container = document.getElementById(`bar-container-${table.key}`);
      if (!container) {
        return;
      }
      const state = barState[table.key] || {
        metric: table.metrics[0] || "",
        condition: "AA"
      };
      barState[table.key] = state;
      container.innerHTML = "";
      const selectedModels = Array.from(getSelectedModels());
      const rowIndex = {};
      table.rows.forEach((row) => {
        rowIndex[row.model] = row;
      });
      const mode = document.getElementById("deltaMode").value;
      const rows = selectedModels.map((model) => {
        const row = rowIndex[model];
        if (!row) {
          return null;
        }
        const baseline = getMetricDisplayValue(row, state.metric, table, "OO");
        const value = getMetricDisplayValue(row, state.metric, table, state.condition);
        const delta = computeDeltaValue(value, baseline, mode);
        if (!isNumber(delta)) {
          return null;
        }
        return {
          model,
          baseline,
          value,
          delta,
        };
      }).filter((item) => item);
      if (!rows.length) {
        const empty = document.createElement("div");
        empty.className = "note";
        empty.textContent = "No data available for the current selection.";
        container.appendChild(empty);
        return;
      }

      rows.sort((a, b) => b.delta - a.delta);
      const visible = rows;
      const maxAbs = Math.max(1, ...rows.map((row) => Math.abs(row.delta)));
      const labelWidth = 180;
      const barAreaWidth = 420;
      const barHeight = 18;
      const rowGap = 6;
      const width = labelWidth + barAreaWidth + 40;
      const height = visible.length * (barHeight + rowGap) + 30;
      const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
      svg.setAttribute("viewBox", `0 0 ${width} ${height}`);
      svg.classList.add("chart-svg");
      const zeroX = labelWidth + barAreaWidth / 2;

      const axis = document.createElementNS("http://www.w3.org/2000/svg", "line");
      axis.setAttribute("x1", zeroX);
      axis.setAttribute("x2", zeroX);
      axis.setAttribute("y1", 10);
      axis.setAttribute("y2", height - 10);
      axis.setAttribute("stroke", "#9aa7c5");
      axis.setAttribute("stroke-width", "1");
      svg.appendChild(axis);

      visible.forEach((row, index) => {
        const y = 20 + index * (barHeight + rowGap);
        const label = document.createElementNS("http://www.w3.org/2000/svg", "text");
        label.setAttribute("x", 4);
        label.setAttribute("y", y + barHeight - 4);
        label.setAttribute("font-size", "11");
        label.textContent = row.model;
        svg.appendChild(label);

        const barLength = Math.abs(row.delta) / maxAbs * (barAreaWidth / 2 - 8);
        const x = row.delta >= 0 ? zeroX : zeroX - barLength;
        const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
        rect.setAttribute("x", x);
        rect.setAttribute("y", y);
        rect.setAttribute("width", barLength);
        rect.setAttribute("height", barHeight);
        rect.setAttribute("rx", "3");
        rect.setAttribute("fill", row.delta >= 0 ? "#2fbf71" : "#e06a5f");
        const title = document.createElementNS("http://www.w3.org/2000/svg", "title");
        const deltaText = row.delta.toFixed(2) + (mode === "rel" ? "%" : "");
        title.textContent = `${table.title} | ${row.model} OO: ${row.baseline?.toFixed(2) ?? "NA"}, ${state.condition}: ${row.value?.toFixed(2) ?? "NA"}, Δ: ${deltaText}`;
        rect.appendChild(title);
        svg.appendChild(rect);

        const valueText = document.createElementNS("http://www.w3.org/2000/svg", "text");
        const textX = row.delta >= 0 ? x + barLength + 4 : x - 4;
        valueText.setAttribute("x", textX);
        valueText.setAttribute("y", y + barHeight - 4);
        valueText.setAttribute("text-anchor", row.delta >= 0 ? "start" : "end");
        valueText.setAttribute("font-size", "10");
        valueText.setAttribute("fill", "#2f3a56");
        valueText.textContent = deltaText;
        svg.appendChild(valueText);
      });
      container.appendChild(svg);
    }

    function attachBarControlHandlers() {
      document.querySelectorAll(".chart-controls[data-table-key]").forEach((controls) => {
        const tableKey = controls.dataset.tableKey;
        const metricSelect = document.getElementById(`bar-metric-${tableKey}`);
        const conditionSelect = document.getElementById(`bar-condition-${tableKey}`);
        if (!metricSelect || !conditionSelect) {
          return;
        }
        if (metricSelect.dataset.bound === "1") {
          return;
        }
        metricSelect.dataset.bound = "1";
        metricSelect.addEventListener("change", (event) => {
          const state = barState[tableKey];
          state.metric = event.currentTarget.value;
          renderBarCharts();
        });
        conditionSelect.addEventListener("change", (event) => {
          const state = barState[tableKey];
          state.condition = event.currentTarget.value;
          renderBarCharts();
        });
      });
    }

    buildTableSelect();
    buildModelFilter();
    tableState["main"] = { sortKey: null, sortDir: null };
    categoryTablesFull.forEach((table) => {
      tableState[table.key] = { sortKey: null, sortDir: null };
    });
    categoryTablesSummary.forEach((table) => {
      if (!tableState[table.key]) {
        tableState[table.key] = { sortKey: null, sortDir: null };
      }
    });
    bindControls();
    document.getElementById("detailMode").value = "full";
    buildTableSelect();
    document.getElementById("tableSelect").value = "all";
    buildPlotCategoryFilter();
    renderAllTablesWithHeaders();
    setErrorView("mix");
    setPlotView("scatter");
    setActiveTab("results");
  </script>
</body>
</html>
